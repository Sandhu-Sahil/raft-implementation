=== RUN   TestElectionBasic
09:17:33.409128 [0] listening at [::]:44993
09:17:33.409495 [1] listening at [::]:35025
09:17:33.409716 [2] listening at [::]:45403
09:17:33.411722 [0] election timer started (258ms), term=0
09:17:33.411733 [2] election timer started (150ms), term=0
09:17:33.411767 [1] election timer started (243ms), term=0
09:17:33.562558 [2] becomes Candidate (currentTerm=1); log=[]
09:17:33.562831 [2] election timer started (163ms), term=1
09:17:33.562945 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:33.562985 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:33.566145 [0] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:33.566184 [0] ... term out of date in RequestVote
09:17:33.566220 [0] becomes Follower with term=1; log=[]
09:17:33.566427 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:33.566521 [0] election timer started (262ms), term=1
09:17:33.567424 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:33.567472 [2] wins election with 2 votes
09:17:33.567474 [1] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:33.567532 [1] ... term out of date in RequestVote
09:17:33.567567 [1] becomes Follower with term=1; log=[]
09:17:33.567606 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
09:17:33.567670 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:33.567812 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.567815 [1] election timer started (235ms), term=1
09:17:33.567936 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.568687 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:33.568732 [2] while waiting for reply, state = Leader
09:17:33.571437 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.571457 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.571489 [1] AppendEntries reply: {Term:1 Success:true}
09:17:33.571528 [0] AppendEntries reply: {Term:1 Success:true}
09:17:33.571840 [1] in election timer term changed from 0 to 1, bailing out
09:17:33.571901 [0] in election timer term changed from 0 to 1, bailing out
09:17:33.572075 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:33.572162 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:33.572977 [2] in election timer state=Leader, bailing out
09:17:33.619161 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.619169 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.622801 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.622894 [0] AppendEntries reply: {Term:1 Success:true}
09:17:33.623337 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:33.625392 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.625488 [1] AppendEntries reply: {Term:1 Success:true}
09:17:33.625962 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:33.667954 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.667961 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.671774 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.671853 [1] AppendEntries reply: {Term:1 Success:true}
09:17:33.672320 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:33.673741 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.673869 [0] AppendEntries reply: {Term:1 Success:true}
09:17:33.674362 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:33.713744 [0] becomes Dead
09:17:33.713806 [0] commitChanSender done
09:17:33.713814 [1] becomes Dead
09:17:33.713876 [2] becomes Dead
09:17:33.713907 [1] commitChanSender done
--- PASS: TestElectionBasic (0.31s)
09:17:33.713975 [2] commitChanSender done
=== RUN   TestElectionLeaderDisconnect
09:17:33.714506 [0] listening at [::]:37189
09:17:33.714719 [1] listening at [::]:39667
09:17:33.714870 [2] listening at [::]:39103
09:17:33.716606 [0] in election timer state=Dead, bailing out
09:17:33.716935 [0] election timer started (231ms), term=0
09:17:33.716935 [1] election timer started (152ms), term=0
09:17:33.716938 [2] election timer started (218ms), term=0
09:17:33.718962 [1] in election timer state=Dead, bailing out
09:17:33.877981 [1] becomes Candidate (currentTerm=1); log=[]
09:17:33.878120 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:33.878201 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:33.878248 [1] election timer started (283ms), term=1
09:17:33.881221 [2] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:33.881256 [2] ... term out of date in RequestVote
09:17:33.881280 [2] becomes Follower with term=1; log=[]
09:17:33.881384 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:33.881576 [2] election timer started (201ms), term=1
09:17:33.882159 [1] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:33.882212 [1] wins election with 2 votes
09:17:33.882223 [0] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:33.882272 [0] ... term out of date in RequestVote
09:17:33.882314 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
09:17:33.882321 [0] becomes Follower with term=1; log=[]
09:17:33.882443 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.882456 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:33.882509 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.882551 [0] election timer started (190ms), term=1
09:17:33.883202 [1] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:33.883237 [1] while waiting for reply, state = Leader
09:17:33.885475 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.885549 [0] AppendEntries reply: {Term:1 Success:true}
09:17:33.886123 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:33.888043 [2] in election timer term changed from 0 to 1, bailing out
09:17:33.888076 [0] in election timer term changed from 0 to 1, bailing out
09:17:33.888174 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.888226 [2] AppendEntries reply: {Term:1 Success:true}
09:17:33.888554 [1] in election timer state=Leader, bailing out
09:17:33.888799 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:33.932924 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.932932 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.937699 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.937771 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.937799 [2] AppendEntries reply: {Term:1 Success:true}
09:17:33.937832 [0] AppendEntries reply: {Term:1 Success:true}
09:17:33.938208 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:33.938314 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:33.983231 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.983253 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.985888 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.985952 [0] AppendEntries reply: {Term:1 Success:true}
09:17:33.986338 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:33.988414 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:33.988485 [2] AppendEntries reply: {Term:1 Success:true}
09:17:33.988883 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:34.018477 [TEST] Disconnect 1
09:17:34.032894 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.032910 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.083127 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.083189 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.133164 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.133165 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.183041 [0] becomes Candidate (currentTerm=2); log=[]
09:17:34.183196 [0] election timer started (229ms), term=2
09:17:34.183318 [0] sending RequestVote to 1: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:34.183335 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.183380 [0] sending RequestVote to 2: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:34.183382 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.187606 [2] RequestVote: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=1, log index/term=(-1, -1)]
09:17:34.187642 [2] ... term out of date in RequestVote
09:17:34.187670 [2] becomes Follower with term=2; log=[]
09:17:34.187793 [2] ... RequestVote reply: &{Term:2 VoteGranted:true}
09:17:34.187896 [2] election timer started (178ms), term=2
09:17:34.188581 [0] received RequestVoteReply {Term:2 VoteGranted:true}
09:17:34.188615 [0] wins election with 2 votes
09:17:34.188687 [0] becomes Leader; term=2, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
09:17:34.188850 [0] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.188852 [0] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.190666 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.190714 [2] AppendEntries reply: {Term:2 Success:true}
09:17:34.191146 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:34.192070 [2] in election timer term changed from 1 to 2, bailing out
09:17:34.194259 [0] in election timer state=Leader, bailing out
09:17:34.232863 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.232915 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.239269 [0] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.239271 [0] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.245129 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.245266 [2] AppendEntries reply: {Term:2 Success:true}
09:17:34.245953 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:34.283192 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.283218 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.289659 [0] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.289687 [0] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.294682 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.294738 [2] AppendEntries reply: {Term:2 Success:true}
09:17:34.295176 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:34.333414 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.333445 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.338921 [0] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.338931 [0] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.341681 [2] AppendEntries: {Term:2 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.341737 [2] AppendEntries reply: {Term:2 Success:true}
09:17:34.342078 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:34.370294 [0] becomes Dead
09:17:34.370437 [0] commitChanSender done
09:17:34.370490 [1] becomes Dead
09:17:34.370581 [1] commitChanSender done
09:17:34.370728 [2] becomes Dead
09:17:34.370796 [2] commitChanSender done
--- PASS: TestElectionLeaderDisconnect (0.66s)
=== RUN   TestElectionLeaderAndAnotherDisconnect
09:17:34.372340 [0] listening at [::]:36035
09:17:34.372597 [1] listening at [::]:37539
09:17:34.372843 [2] listening at [::]:41841
09:17:34.375372 [1] election timer started (161ms), term=0
09:17:34.375396 [2] election timer started (172ms), term=0
09:17:34.375410 [0] election timer started (287ms), term=0
09:17:34.378301 [2] in election timer state=Dead, bailing out
09:17:34.546369 [1] becomes Candidate (currentTerm=1); log=[]
09:17:34.546524 [1] election timer started (213ms), term=1
09:17:34.546629 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:34.546649 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:34.549874 [0] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:34.549911 [0] ... term out of date in RequestVote
09:17:34.549952 [0] becomes Follower with term=1; log=[]
09:17:34.550050 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:34.550194 [0] election timer started (256ms), term=1
09:17:34.550718 [1] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:34.550751 [1] wins election with 2 votes
09:17:34.550758 [2] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:34.550789 [2] ... term out of date in RequestVote
09:17:34.550811 [2] becomes Follower with term=1; log=[]
09:17:34.550835 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
09:17:34.550927 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:34.550999 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.551025 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.551084 [2] election timer started (183ms), term=1
09:17:34.551684 [1] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:34.551720 [1] while waiting for reply, state = Leader
09:17:34.552809 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.552879 [2] AppendEntries reply: {Term:1 Success:true}
09:17:34.553276 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:34.554225 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.554280 [0] AppendEntries reply: {Term:1 Success:true}
09:17:34.554604 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:34.555561 [2] in election timer term changed from 0 to 1, bailing out
09:17:34.556121 [0] in election timer term changed from 0 to 1, bailing out
09:17:34.557004 [1] in election timer state=Leader, bailing out
09:17:34.601691 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.601707 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.604358 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.604518 [0] AppendEntries reply: {Term:1 Success:true}
09:17:34.605281 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:34.607461 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.607589 [2] AppendEntries reply: {Term:1 Success:true}
09:17:34.608276 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:34.652102 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.652155 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.653672 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.653757 [2] AppendEntries reply: {Term:1 Success:true}
09:17:34.654667 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:34.656519 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.656587 [0] AppendEntries reply: {Term:1 Success:true}
09:17:34.657017 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:34.675904 [TEST] Disconnect 1
09:17:34.676376 [TEST] Disconnect 2
09:17:34.701800 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.701840 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.751796 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.751823 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.801602 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.801637 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.841979 [2] becomes Candidate (currentTerm=2); log=[]
09:17:34.842116 [2] election timer started (158ms), term=2
09:17:34.842195 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:34.842309 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:34.851367 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.851390 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.901695 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.901726 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.920608 [0] becomes Candidate (currentTerm=2); log=[]
09:17:34.920875 [0] election timer started (256ms), term=2
09:17:34.920996 [0] sending RequestVote to 2: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:34.921032 [0] sending RequestVote to 1: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:34.952092 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:34.952114 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.001619 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.001644 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.002773 [2] becomes Candidate (currentTerm=3); log=[]
09:17:35.002923 [2] election timer started (160ms), term=3
09:17:35.002996 [2] sending RequestVote to 0: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.003016 [2] sending RequestVote to 1: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.051718 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.051718 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.102192 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.102194 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.127638 [TEST] Reconnect 2
09:17:35.151393 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.151451 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.155439 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.155548 [2] AppendEntries reply: {Term:3 Success:false}
09:17:35.156882 [1] term out of date in heartbeat reply
09:17:35.156945 [1] becomes Follower with term=3; log=[]
09:17:35.157079 [1] election timer started (165ms), term=3
09:17:35.163675 [2] becomes Candidate (currentTerm=4); log=[]
09:17:35.163827 [2] election timer started (296ms), term=4
09:17:35.163890 [2] sending RequestVote to 0: {Term:4 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.163958 [2] sending RequestVote to 1: {Term:4 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.165931 [0] RequestVote: {Term:4 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=0, log index/term=(-1, -1)]
09:17:35.165962 [0] ... term out of date in RequestVote
09:17:35.165995 [0] becomes Follower with term=4; log=[]
09:17:35.166116 [0] ... RequestVote reply: &{Term:4 VoteGranted:true}
09:17:35.166182 [0] election timer started (293ms), term=4
09:17:35.166886 [2] received RequestVoteReply {Term:4 VoteGranted:true}
09:17:35.166924 [2] wins election with 2 votes
09:17:35.166991 [2] becomes Leader; term=4, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
09:17:35.167147 [2] sending AppendEntries to 1: ni=0, args={Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.167154 [2] sending AppendEntries to 0: ni=0, args={Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.170728 [1] RequestVote: {Term:4 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=3, votedFor=-1, log index/term=(-1, -1)]
09:17:35.170775 [1] ... term out of date in RequestVote
09:17:35.170805 [1] becomes Follower with term=4; log=[]
09:17:35.171044 [0] AppendEntries: {Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.171063 [1] ... RequestVote reply: &{Term:4 VoteGranted:true}
09:17:35.171160 [0] AppendEntries reply: {Term:4 Success:true}
09:17:35.171308 [1] AppendEntries: {Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.171364 [0] in election timer term changed from 2 to 4, bailing out
09:17:35.171385 [1] AppendEntries reply: {Term:4 Success:true}
09:17:35.171566 [1] election timer started (172ms), term=4
09:17:35.172493 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:35.172880 [2] received RequestVoteReply {Term:4 VoteGranted:true}
09:17:35.172926 [2] while waiting for reply, state = Leader
09:17:35.173039 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:35.174388 [2] in election timer state=Leader, bailing out
09:17:35.177929 [1] in election timer term changed from 3 to 4, bailing out
09:17:35.217383 [2] sending AppendEntries to 0: ni=0, args={Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.217393 [2] sending AppendEntries to 1: ni=0, args={Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.218891 [0] AppendEntries: {Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.218943 [0] AppendEntries reply: {Term:4 Success:true}
09:17:35.219222 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:35.220273 [1] AppendEntries: {Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.220315 [1] AppendEntries reply: {Term:4 Success:true}
09:17:35.220593 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:35.267977 [2] sending AppendEntries to 1: ni=0, args={Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.268044 [2] sending AppendEntries to 0: ni=0, args={Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.269608 [1] AppendEntries: {Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.269662 [1] AppendEntries reply: {Term:4 Success:true}
09:17:35.269934 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:35.273165 [0] AppendEntries: {Term:4 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.273217 [0] AppendEntries reply: {Term:4 Success:true}
09:17:35.273524 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:35.281068 [0] becomes Dead
09:17:35.281161 [0] commitChanSender done
09:17:35.281233 [1] becomes Dead
09:17:35.281298 [1] commitChanSender done
09:17:35.281356 [2] becomes Dead
09:17:35.281423 [2] commitChanSender done
--- PASS: TestElectionLeaderAndAnotherDisconnect (0.91s)
=== RUN   TestDisconnectAllThenRestore
09:17:35.281816 [1] in election timer state=Dead, bailing out
09:17:35.282065 [0] listening at [::]:34115
09:17:35.282276 [1] listening at [::]:42043
09:17:35.282499 [2] listening at [::]:43637
09:17:35.284341 [1] election timer started (264ms), term=0
09:17:35.284358 [2] election timer started (249ms), term=0
09:17:35.284354 [0] election timer started (202ms), term=0
09:17:35.286306 [0] in election timer state=Dead, bailing out
09:17:35.385323 [TEST] Disconnect 0
09:17:35.385772 [TEST] Disconnect 1
09:17:35.385946 [TEST] Disconnect 2
09:17:35.495188 [0] becomes Candidate (currentTerm=1); log=[]
09:17:35.495312 [0] election timer started (270ms), term=1
09:17:35.495354 [0] sending RequestVote to 1: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.495424 [0] sending RequestVote to 2: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.534703 [2] becomes Candidate (currentTerm=1); log=[]
09:17:35.534882 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.534912 [2] election timer started (207ms), term=1
09:17:35.534939 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.554650 [1] becomes Candidate (currentTerm=1); log=[]
09:17:35.554826 [1] election timer started (289ms), term=1
09:17:35.554919 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.554974 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.745838 [2] becomes Candidate (currentTerm=2); log=[]
09:17:35.745964 [2] election timer started (180ms), term=2
09:17:35.746001 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.746045 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.765752 [0] becomes Candidate (currentTerm=2); log=[]
09:17:35.765898 [0] election timer started (237ms), term=2
09:17:35.765938 [0] sending RequestVote to 1: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.766062 [0] sending RequestVote to 2: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.836883 [TEST] Reconnect 0
09:17:35.838318 [TEST] Reconnect 1
09:17:35.839120 [TEST] Reconnect 2
09:17:35.845387 [1] becomes Candidate (currentTerm=2); log=[]
09:17:35.845550 [1] sending RequestVote to 2: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.845623 [1] sending RequestVote to 0: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.845628 [1] election timer started (219ms), term=2
09:17:35.848120 [0] RequestVote: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=0, log index/term=(-1, -1)]
09:17:35.848206 [0] ... RequestVote reply: &{Term:2 VoteGranted:false}
09:17:35.848833 [1] received RequestVoteReply {Term:2 VoteGranted:false}
09:17:35.849596 [2] RequestVote: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=2, log index/term=(-1, -1)]
09:17:35.849665 [2] ... RequestVote reply: &{Term:2 VoteGranted:false}
09:17:35.850242 [1] received RequestVoteReply {Term:2 VoteGranted:false}
09:17:35.926727 [2] becomes Candidate (currentTerm=3); log=[]
09:17:35.926917 [2] election timer started (215ms), term=3
09:17:35.927012 [2] sending RequestVote to 1: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.927012 [2] sending RequestVote to 0: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:35.931243 [1] RequestVote: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=1, log index/term=(-1, -1)]
09:17:35.931283 [1] ... term out of date in RequestVote
09:17:35.931310 [1] becomes Follower with term=3; log=[]
09:17:35.931445 [1] ... RequestVote reply: &{Term:3 VoteGranted:true}
09:17:35.931510 [1] election timer started (184ms), term=3
09:17:35.932093 [2] received RequestVoteReply {Term:3 VoteGranted:true}
09:17:35.932127 [2] wins election with 2 votes
09:17:35.932183 [0] RequestVote: {Term:3 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=0, log index/term=(-1, -1)]
09:17:35.932208 [2] becomes Leader; term=3, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
09:17:35.932227 [0] ... term out of date in RequestVote
09:17:35.932302 [0] becomes Follower with term=3; log=[]
09:17:35.932389 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.932427 [0] ... RequestVote reply: &{Term:3 VoteGranted:true}
09:17:35.932439 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.932581 [0] election timer started (219ms), term=3
09:17:35.933443 [2] received RequestVoteReply {Term:3 VoteGranted:true}
09:17:35.933494 [2] while waiting for reply, state = Leader
09:17:35.935768 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.935805 [1] AppendEntries reply: {Term:3 Success:true}
09:17:35.935996 [1] in election timer term changed from 2 to 3, bailing out
09:17:35.936039 [0] in election timer term changed from 2 to 3, bailing out
09:17:35.936286 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:35.937177 [2] in election timer state=Leader, bailing out
09:17:35.938382 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.938435 [0] AppendEntries reply: {Term:3 Success:true}
09:17:35.938870 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:35.982552 [2] sending AppendEntries to 1: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.982592 [2] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.984225 [0] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.984284 [0] AppendEntries reply: {Term:3 Success:true}
09:17:35.984632 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:35.985585 [1] AppendEntries: {Term:3 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:35.985632 [1] AppendEntries reply: {Term:3 Success:true}
09:17:35.985896 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:35.990843 [0] becomes Dead
09:17:35.990927 [0] commitChanSender done
09:17:35.990993 [1] becomes Dead
09:17:35.991061 [1] commitChanSender done
09:17:35.991117 [2] becomes Dead
09:17:35.991172 [2] commitChanSender done
--- PASS: TestDisconnectAllThenRestore (0.71s)
=== RUN   TestElectionLeaderDisconnectThenReconnect
09:17:35.991610 [1] in election timer state=Dead, bailing out
09:17:35.991850 [0] listening at [::]:38091
09:17:35.992122 [1] listening at [::]:38463
09:17:35.992401 [2] listening at [::]:40851
09:17:35.992933 [0] in election timer state=Dead, bailing out
09:17:35.994903 [2] election timer started (260ms), term=0
09:17:35.994920 [0] election timer started (155ms), term=0
09:17:35.995112 [1] election timer started (275ms), term=0
09:17:36.155045 [0] becomes Candidate (currentTerm=1); log=[]
09:17:36.155280 [0] sending RequestVote to 2: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:36.155314 [0] sending RequestVote to 1: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:36.155373 [0] election timer started (285ms), term=1
09:17:36.161460 [1] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:36.161492 [2] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:36.161519 [1] ... term out of date in RequestVote
09:17:36.161554 [2] ... term out of date in RequestVote
09:17:36.161586 [1] becomes Follower with term=1; log=[]
09:17:36.161606 [2] becomes Follower with term=1; log=[]
09:17:36.161711 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:36.161722 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:36.161806 [2] election timer started (161ms), term=1
09:17:36.161812 [1] election timer started (220ms), term=1
09:17:36.162544 [0] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:36.162579 [0] wins election with 2 votes
09:17:36.162669 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
09:17:36.162761 [0] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:36.162806 [0] while waiting for reply, state = Leader
09:17:36.162960 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.162973 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.164766 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.164803 [1] AppendEntries reply: {Term:1 Success:true}
09:17:36.165031 [2] in election timer term changed from 0 to 1, bailing out
09:17:36.165193 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:36.165309 [1] in election timer term changed from 0 to 1, bailing out
09:17:36.166101 [0] in election timer state=Leader, bailing out
09:17:36.168506 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.168639 [2] AppendEntries reply: {Term:1 Success:true}
09:17:36.169301 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:36.213762 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.213769 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.218409 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.218471 [2] AppendEntries reply: {Term:1 Success:true}
09:17:36.218791 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:36.219759 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.219805 [1] AppendEntries reply: {Term:1 Success:true}
09:17:36.220047 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:36.263759 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.263759 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.266411 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.266487 [2] AppendEntries reply: {Term:1 Success:true}
09:17:36.266911 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:36.269928 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.269982 [1] AppendEntries reply: {Term:1 Success:true}
09:17:36.270314 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:36.296347 [TEST] Disconnect 0
09:17:36.313816 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.313859 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.363627 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.363660 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.413201 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.413224 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.432835 [2] becomes Candidate (currentTerm=2); log=[]
09:17:36.433016 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:36.433071 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:36.433072 [2] election timer started (218ms), term=2
09:17:36.439384 [1] RequestVote: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=0, log index/term=(-1, -1)]
09:17:36.439517 [1] ... term out of date in RequestVote
09:17:36.439619 [1] becomes Follower with term=2; log=[]
09:17:36.440071 [1] ... RequestVote reply: &{Term:2 VoteGranted:true}
09:17:36.440455 [1] election timer started (151ms), term=2
09:17:36.441653 [2] received RequestVoteReply {Term:2 VoteGranted:true}
09:17:36.441692 [2] wins election with 2 votes
09:17:36.441757 [2] becomes Leader; term=2, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
09:17:36.441926 [2] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.441935 [2] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.442015 [1] in election timer term changed from 1 to 2, bailing out
09:17:36.443424 [2] in election timer state=Leader, bailing out
09:17:36.446752 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.446827 [1] AppendEntries reply: {Term:2 Success:true}
09:17:36.447355 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:36.463069 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.463093 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.492979 [2] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.492982 [2] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.499039 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.499110 [1] AppendEntries reply: {Term:2 Success:true}
09:17:36.499451 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:36.513356 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.513478 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.542745 [2] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.542753 [2] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.546832 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.546905 [1] AppendEntries reply: {Term:2 Success:true}
09:17:36.547243 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:36.562946 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.562945 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.593038 [2] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.593038 [2] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.597160 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.597208 [1] AppendEntries reply: {Term:2 Success:true}
09:17:36.597562 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:36.613430 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.613447 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.642647 [2] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.642685 [2] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.646533 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.646606 [1] AppendEntries reply: {Term:2 Success:true}
09:17:36.647039 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:36.647076 [TEST] Reconnect 0
09:17:36.663137 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.663196 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.666715 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.666761 [1] AppendEntries reply: {Term:2 Success:false}
09:17:36.667466 [0] term out of date in heartbeat reply
09:17:36.667508 [0] becomes Follower with term=2; log=[]
09:17:36.667599 [0] election timer started (255ms), term=2
09:17:36.670298 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.670352 [2] AppendEntries reply: {Term:2 Success:false}
09:17:36.692936 [2] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.692967 [2] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.697645 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.697700 [0] AppendEntries reply: {Term:2 Success:true}
09:17:36.699113 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.699162 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:36.699231 [1] AppendEntries reply: {Term:2 Success:true}
09:17:36.699610 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:36.742474 [2] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.742535 [2] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.747311 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.747358 [1] AppendEntries reply: {Term:2 Success:true}
09:17:36.747653 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:36.748616 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.748654 [0] AppendEntries reply: {Term:2 Success:true}
09:17:36.748934 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:36.792311 [2] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.792353 [2] sending AppendEntries to 1: ni=0, args={Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.796057 [0] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.796093 [1] AppendEntries: {Term:2 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.796136 [1] AppendEntries reply: {Term:2 Success:true}
09:17:36.796143 [0] AppendEntries reply: {Term:2 Success:true}
09:17:36.796426 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:36.796501 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:36.798976 [0] becomes Dead
09:17:36.799049 [0] commitChanSender done
09:17:36.799068 [1] becomes Dead
09:17:36.799149 [1] commitChanSender done
09:17:36.799168 [2] becomes Dead
09:17:36.799240 [2] commitChanSender done
--- PASS: TestElectionLeaderDisconnectThenReconnect (0.81s)
=== RUN   TestElectionLeaderDisconnectThenReconnect5
09:17:36.801039 [1] in election timer state=Dead, bailing out
09:17:36.802835 [0] listening at [::]:33573
09:17:36.803335 [1] listening at [::]:33357
09:17:36.803528 [2] listening at [::]:32839
09:17:36.803703 [3] listening at [::]:37761
09:17:36.803860 [4] listening at [::]:35947
09:17:36.807761 [0] in election timer state=Dead, bailing out
09:17:36.811481 [4] election timer started (173ms), term=0
09:17:36.811650 [0] election timer started (295ms), term=0
09:17:36.811518 [3] election timer started (298ms), term=0
09:17:36.811524 [1] election timer started (296ms), term=0
09:17:36.811884 [2] election timer started (278ms), term=0
09:17:36.992923 [4] becomes Candidate (currentTerm=1); log=[]
09:17:36.993113 [4] sending RequestVote to 2: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
09:17:36.993263 [4] sending RequestVote to 0: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
09:17:36.993288 [4] election timer started (194ms), term=1
09:17:36.993266 [4] sending RequestVote to 1: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
09:17:36.993344 [4] sending RequestVote to 3: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
09:17:36.995312 [2] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:36.995345 [2] ... term out of date in RequestVote
09:17:36.995382 [2] becomes Follower with term=1; log=[]
09:17:36.995482 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:36.995534 [2] election timer started (237ms), term=1
09:17:36.996105 [4] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:36.996897 [3] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:36.996926 [3] ... term out of date in RequestVote
09:17:36.996951 [3] becomes Follower with term=1; log=[]
09:17:36.997042 [3] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:36.997151 [3] election timer started (240ms), term=1
09:17:36.997733 [4] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:36.997774 [4] wins election with 3 votes
09:17:36.997871 [4] becomes Leader; term=1, nextIndex=map[0:0 1:0 2:0 3:0], matchIndex=map[0:-1 1:-1 2:-1 3:-1]; log=[]
09:17:36.998038 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.998046 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.998098 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.998107 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:36.998229 [1] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:36.998272 [0] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:36.998276 [1] ... term out of date in RequestVote
09:17:36.998399 [1] becomes Follower with term=1; log=[]
09:17:36.998330 [0] ... term out of date in RequestVote
09:17:36.998534 [0] becomes Follower with term=1; log=[]
09:17:36.998565 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:36.998635 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:36.999020 [0] election timer started (266ms), term=1
09:17:36.999059 [1] election timer started (205ms), term=1
09:17:36.999637 [4] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:36.999680 [4] while waiting for reply, state = Leader
09:17:36.999725 [4] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:36.999749 [4] while waiting for reply, state = Leader
09:17:37.001197 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.001222 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.001246 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.001260 [1] AppendEntries reply: {Term:1 Success:true}
09:17:37.001278 [3] AppendEntries reply: {Term:1 Success:true}
09:17:37.001290 [0] AppendEntries reply: {Term:1 Success:true}
09:17:37.001734 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.001799 [0] in election timer term changed from 0 to 1, bailing out
09:17:37.001820 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.001850 [3] in election timer term changed from 0 to 1, bailing out
09:17:37.001896 [1] in election timer term changed from 0 to 1, bailing out
09:17:37.001913 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.001995 [2] in election timer term changed from 0 to 1, bailing out
09:17:37.003761 [4] in election timer state=Leader, bailing out
09:17:37.003816 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.003853 [2] AppendEntries reply: {Term:1 Success:true}
09:17:37.004253 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.048747 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.048824 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.048833 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.048835 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.051481 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.051525 [1] AppendEntries reply: {Term:1 Success:true}
09:17:37.051563 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.051621 [0] AppendEntries reply: {Term:1 Success:true}
09:17:37.051883 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.051985 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.052961 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.053000 [2] AppendEntries reply: {Term:1 Success:true}
09:17:37.053285 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.054270 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.054328 [3] AppendEntries reply: {Term:1 Success:true}
09:17:37.054618 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.098065 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.098133 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.098233 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.098311 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.100711 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.100753 [2] AppendEntries reply: {Term:1 Success:true}
09:17:37.100782 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.100851 [1] AppendEntries reply: {Term:1 Success:true}
09:17:37.101047 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.101155 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.103205 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.103255 [0] AppendEntries reply: {Term:1 Success:true}
09:17:37.103529 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.103568 [3] AppendEntries reply: {Term:1 Success:true}
09:17:37.103587 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.103874 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:37.112409 [TEST] Disconnect 4
09:17:37.148308 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.148363 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.148310 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.148315 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.198769 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.198812 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.198889 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.198925 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.249138 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.249192 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.249192 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.249288 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.298087 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.298091 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.298168 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.298175 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.309987 [1] becomes Candidate (currentTerm=2); log=[]
09:17:37.310343 [1] sending RequestVote to 4: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:37.310370 [1] sending RequestVote to 3: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:37.310431 [1] sending RequestVote to 2: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:37.310345 [1] sending RequestVote to 0: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:37.310365 [1] election timer started (233ms), term=2
09:17:37.312771 [0] RequestVote: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=4, log index/term=(-1, -1)]
09:17:37.312805 [0] ... term out of date in RequestVote
09:17:37.312832 [0] becomes Follower with term=2; log=[]
09:17:37.312932 [0] ... RequestVote reply: &{Term:2 VoteGranted:true}
09:17:37.313017 [0] election timer started (189ms), term=2
09:17:37.313611 [1] received RequestVoteReply {Term:2 VoteGranted:true}
09:17:37.313656 [2] RequestVote: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=4, log index/term=(-1, -1)]
09:17:37.313691 [2] ... term out of date in RequestVote
09:17:37.313733 [2] becomes Follower with term=2; log=[]
09:17:37.313829 [2] ... RequestVote reply: &{Term:2 VoteGranted:true}
09:17:37.313897 [2] election timer started (252ms), term=2
09:17:37.314478 [1] received RequestVoteReply {Term:2 VoteGranted:true}
09:17:37.314506 [1] wins election with 3 votes
09:17:37.314605 [1] becomes Leader; term=2, nextIndex=map[0:0 2:0 3:0 4:0], matchIndex=map[0:-1 2:-1 3:-1 4:-1]; log=[]
09:17:37.314758 [1] sending AppendEntries to 4: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.314823 [1] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.314839 [1] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.314930 [1] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.316308 [2] in election timer term changed from 1 to 2, bailing out
09:17:37.317450 [3] RequestVote: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=4, log index/term=(-1, -1)]
09:17:37.317490 [3] ... term out of date in RequestVote
09:17:37.317529 [3] becomes Follower with term=2; log=[]
09:17:37.317615 [3] ... RequestVote reply: &{Term:2 VoteGranted:true}
09:17:37.317735 [3] in election timer term changed from 1 to 2, bailing out
09:17:37.317795 [3] election timer started (183ms), term=2
09:17:37.318255 [1] received RequestVoteReply {Term:2 VoteGranted:true}
09:17:37.318318 [1] while waiting for reply, state = Leader
09:17:37.318974 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.319000 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.319015 [0] AppendEntries reply: {Term:2 Success:true}
09:17:37.319058 [3] AppendEntries reply: {Term:2 Success:true}
09:17:37.319281 [0] in election timer term changed from 1 to 2, bailing out
09:17:37.319492 [1] AppendEntries reply from 3 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.319596 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.321561 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.321562 [1] in election timer state=Leader, bailing out
09:17:37.321607 [2] AppendEntries reply: {Term:2 Success:true}
09:17:37.321964 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.348403 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.348438 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.348403 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.348404 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.365622 [1] sending AppendEntries to 4: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.365658 [1] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.365686 [1] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.365672 [1] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.367218 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.367256 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.367273 [2] AppendEntries reply: {Term:2 Success:true}
09:17:37.367313 [3] AppendEntries reply: {Term:2 Success:true}
09:17:37.367645 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.367733 [1] AppendEntries reply from 3 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.368583 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.368617 [0] AppendEntries reply: {Term:2 Success:true}
09:17:37.368835 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.399009 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.399014 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.399014 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.399026 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.415207 [TEST] Reconnect 4
09:17:37.415510 [1] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.415539 [1] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.415521 [1] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.415549 [1] sending AppendEntries to 4: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.417011 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.417060 [2] AppendEntries reply: {Term:2 Success:true}
09:17:37.417405 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.418973 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.419029 [0] AppendEntries reply: {Term:2 Success:true}
09:17:37.419338 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.420322 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.420368 [3] AppendEntries reply: {Term:2 Success:true}
09:17:37.420601 [1] AppendEntries reply from 3 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.448434 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.448467 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.448507 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.448513 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.451798 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.451865 [1] AppendEntries reply: {Term:2 Success:false}
09:17:37.452687 [4] term out of date in heartbeat reply
09:17:37.452722 [4] becomes Follower with term=2; log=[]
09:17:37.452793 [4] election timer started (154ms), term=2
09:17:37.452867 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.452904 [2] AppendEntries reply: {Term:2 Success:false}
09:17:37.453725 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.453788 [0] AppendEntries reply: {Term:2 Success:false}
09:17:37.455277 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.455345 [3] AppendEntries reply: {Term:2 Success:false}
09:17:37.465735 [1] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.465768 [1] sending AppendEntries to 4: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.465735 [1] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.465777 [1] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.468762 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.468842 [2] AppendEntries reply: {Term:2 Success:true}
09:17:37.469232 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.470226 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.470279 [4] AppendEntries reply: {Term:2 Success:true}
09:17:37.471104 [1] AppendEntries reply from 4 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.471687 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.471700 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.471728 [3] AppendEntries reply: {Term:2 Success:true}
09:17:37.471763 [0] AppendEntries reply: {Term:2 Success:true}
09:17:37.472092 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.472198 [1] AppendEntries reply from 3 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.514981 [1] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.515020 [1] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.515037 [1] sending AppendEntries to 4: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.515092 [1] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.516595 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.516639 [4] AppendEntries reply: {Term:2 Success:true}
09:17:37.516909 [1] AppendEntries reply from 4 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.519130 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.519178 [3] AppendEntries reply: {Term:2 Success:true}
09:17:37.519481 [1] AppendEntries reply from 3 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.519513 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.519571 [2] AppendEntries reply: {Term:2 Success:true}
09:17:37.519889 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.520889 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.520933 [0] AppendEntries reply: {Term:2 Success:true}
09:17:37.521285 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.565272 [1] sending AppendEntries to 3: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.565310 [1] sending AppendEntries to 0: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.565391 [1] sending AppendEntries to 4: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.565287 [1] sending AppendEntries to 2: ni=0, args={Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.568841 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.568898 [2] AppendEntries reply: {Term:2 Success:true}
09:17:37.568947 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.569016 [0] AppendEntries reply: {Term:2 Success:true}
09:17:37.569288 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.569431 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0 3:0 4:0], matchIndex := map[0:-1 2:-1 3:-1 4:-1]
09:17:37.569778 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.569831 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.569887 [4] AppendEntries reply: {Term:2 Success:true}
09:17:37.569832 [3] AppendEntries reply: {Term:2 Success:true}
09:17:37.570196 [0] becomes Dead
09:17:37.570260 [0] commitChanSender done
09:17:37.570285 [1] becomes Dead
09:17:37.570347 [1] commitChanSender done
09:17:37.570353 [2] becomes Dead
09:17:37.570422 [2] commitChanSender done
09:17:37.570483 [3] becomes Dead
09:17:37.570533 [3] commitChanSender done
09:17:37.570593 [4] becomes Dead
09:17:37.570642 [4] commitChanSender done
09:17:37.573407 [4] in election timer state=Dead, bailing out
09:17:37.573446 [0] in election timer state=Dead, bailing out
09:17:37.574762 [2] in election timer state=Dead, bailing out
09:17:37.577969 [3] in election timer state=Dead, bailing out
--- PASS: TestElectionLeaderDisconnectThenReconnect5 (0.82s)
=== RUN   TestElectionFollowerComesBack
09:17:37.624583 [0] listening at [::]:33081
09:17:37.625292 [1] listening at [::]:33711
09:17:37.625591 [2] listening at [::]:46473
09:17:37.627791 [1] election timer started (278ms), term=0
09:17:37.627861 [2] election timer started (189ms), term=0
09:17:37.627897 [0] election timer started (201ms), term=0
09:17:37.818181 [2] becomes Candidate (currentTerm=1); log=[]
09:17:37.818357 [2] election timer started (284ms), term=1
09:17:37.818398 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:37.818469 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:37.823568 [1] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:37.823638 [1] ... term out of date in RequestVote
09:17:37.823677 [1] becomes Follower with term=1; log=[]
09:17:37.823699 [0] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:37.823748 [0] ... term out of date in RequestVote
09:17:37.823788 [0] becomes Follower with term=1; log=[]
09:17:37.823848 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:37.823911 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:37.823940 [1] election timer started (231ms), term=1
09:17:37.824009 [0] election timer started (266ms), term=1
09:17:37.824766 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:37.824808 [2] wins election with 2 votes
09:17:37.824911 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
09:17:37.825003 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:37.825042 [2] while waiting for reply, state = Leader
09:17:37.825159 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.825217 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.828784 [1] in election timer term changed from 0 to 1, bailing out
09:17:37.828835 [0] in election timer term changed from 0 to 1, bailing out
09:17:37.828900 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.828905 [2] in election timer state=Leader, bailing out
09:17:37.828976 [1] AppendEntries reply: {Term:1 Success:true}
09:17:37.829562 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:37.831634 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.831718 [0] AppendEntries reply: {Term:1 Success:true}
09:17:37.832612 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:37.876072 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.876098 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.877682 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.877737 [0] AppendEntries reply: {Term:1 Success:true}
09:17:37.878091 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:37.880127 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.880165 [1] AppendEntries reply: {Term:1 Success:true}
09:17:37.880457 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:37.925157 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.925163 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.928615 [TEST] Disconnect 0
09:17:37.931361 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.931367 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.931433 [1] AppendEntries reply: {Term:1 Success:true}
09:17:37.931474 [0] AppendEntries reply: {Term:1 Success:true}
09:17:37.931732 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:37.975603 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.975609 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.979494 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:37.979539 [1] AppendEntries reply: {Term:1 Success:true}
09:17:37.979833 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.025761 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.025762 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.028357 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.028399 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.028646 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.075576 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.075581 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.081509 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.081567 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.081905 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.125400 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.125675 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.128258 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.128410 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.129398 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.176147 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.176147 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.180843 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.180887 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.181271 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.204864 [0] becomes Candidate (currentTerm=2); log=[]
09:17:38.204999 [0] sending RequestVote to 2: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:38.205070 [0] election timer started (184ms), term=2
09:17:38.205074 [0] sending RequestVote to 1: {Term:2 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:38.225945 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.226022 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.227500 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.227563 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.228091 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.275583 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.275583 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.281995 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.282045 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.282451 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.326139 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.326141 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.327955 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.328028 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.328491 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.375540 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.375579 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.379360 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.379403 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.379746 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.395620 [0] becomes Candidate (currentTerm=3); log=[]
09:17:38.395802 [0] sending RequestVote to 2: {Term:3 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:38.395822 [0] sending RequestVote to 1: {Term:3 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:38.395858 [0] election timer started (263ms), term=3
09:17:38.426175 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.426189 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.431894 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.431942 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.432285 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.476111 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.476241 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.477738 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.477784 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.478178 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.525371 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.525455 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.528864 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.528904 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.529245 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.575376 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.575378 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.577753 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.577792 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.578110 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.580102 [TEST] Reconnect 0
09:17:38.625611 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.625675 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.631397 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.631459 [1] AppendEntries reply: {Term:1 Success:true}
09:17:38.631710 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.631770 [0] AppendEntries reply: {Term:3 Success:false}
09:17:38.631888 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:38.632628 [2] term out of date in heartbeat reply
09:17:38.632665 [2] becomes Follower with term=3; log=[]
09:17:38.632735 [2] election timer started (294ms), term=3
09:17:38.666531 [0] becomes Candidate (currentTerm=4); log=[]
09:17:38.666682 [0] sending RequestVote to 2: {Term:4 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:38.666742 [0] election timer started (187ms), term=4
09:17:38.666777 [0] sending RequestVote to 1: {Term:4 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:38.669800 [2] RequestVote: {Term:4 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=3, votedFor=-1, log index/term=(-1, -1)]
09:17:38.669839 [2] ... term out of date in RequestVote
09:17:38.669877 [2] becomes Follower with term=4; log=[]
09:17:38.670001 [2] ... RequestVote reply: &{Term:4 VoteGranted:true}
09:17:38.670153 [2] election timer started (231ms), term=4
09:17:38.670778 [0] received RequestVoteReply {Term:4 VoteGranted:true}
09:17:38.670827 [0] wins election with 2 votes
09:17:38.670953 [0] becomes Leader; term=4, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
09:17:38.671092 [0] sending AppendEntries to 2: ni=0, args={Term:4 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.671122 [0] sending AppendEntries to 1: ni=0, args={Term:4 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.671871 [1] RequestVote: {Term:4 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=1, votedFor=2, log index/term=(-1, -1)]
09:17:38.671908 [1] ... term out of date in RequestVote
09:17:38.671944 [1] becomes Follower with term=4; log=[]
09:17:38.672058 [1] ... RequestVote reply: &{Term:4 VoteGranted:true}
09:17:38.672150 [1] election timer started (248ms), term=4
09:17:38.673005 [0] received RequestVoteReply {Term:4 VoteGranted:true}
09:17:38.673059 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.673136 [1] AppendEntries reply: {Term:4 Success:true}
09:17:38.673063 [0] while waiting for reply, state = Leader
09:17:38.673013 [2] in election timer term changed from 3 to 4, bailing out
09:17:38.673626 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:38.674536 [1] in election timer term changed from 1 to 4, bailing out
09:17:38.676946 [0] in election timer state=Leader, bailing out
09:17:38.677005 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.677077 [2] AppendEntries reply: {Term:4 Success:true}
09:17:38.677687 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:38.721290 [0] sending AppendEntries to 1: ni=0, args={Term:4 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.721315 [0] sending AppendEntries to 2: ni=0, args={Term:4 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.726073 [2] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.726196 [2] AppendEntries reply: {Term:4 Success:true}
09:17:38.726076 [1] AppendEntries: {Term:4 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:38.726375 [1] AppendEntries reply: {Term:4 Success:true}
09:17:38.726907 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:38.727016 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:38.733007 [0] becomes Dead
09:17:38.733086 [0] commitChanSender done
09:17:38.733148 [1] becomes Dead
09:17:38.733284 [1] commitChanSender done
09:17:38.733294 [2] becomes Dead
09:17:38.733438 [2] commitChanSender done
09:17:38.740827 [2] in election timer state=Dead, bailing out
09:17:38.742662 [1] in election timer state=Dead, bailing out
--- PASS: TestElectionFollowerComesBack (1.17s)
=== RUN   TestElectionDisconnectLoop
09:17:38.792167 [0] listening at [::]:44983
09:17:38.793036 [1] listening at [::]:46095
09:17:38.793478 [2] listening at [::]:40793
09:17:38.795967 [2] election timer started (285ms), term=0
09:17:38.795976 [0] election timer started (196ms), term=0
09:17:38.796035 [1] election timer started (280ms), term=0
09:17:38.997008 [0] becomes Candidate (currentTerm=1); log=[]
09:17:38.997127 [0] election timer started (264ms), term=1
09:17:38.997198 [0] sending RequestVote to 1: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:38.997322 [0] sending RequestVote to 2: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:38.999462 [2] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:38.999495 [2] ... term out of date in RequestVote
09:17:38.999519 [2] becomes Follower with term=1; log=[]
09:17:38.999627 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:38.999752 [2] election timer started (260ms), term=1
09:17:39.000329 [0] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:39.000362 [0] wins election with 2 votes
09:17:39.000433 [0] becomes Leader; term=1, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
09:17:39.000573 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.000614 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.003174 [1] RequestVote: {Term:1 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:39.003222 [1] ... term out of date in RequestVote
09:17:39.003260 [1] becomes Follower with term=1; log=[]
09:17:39.003383 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.003388 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:39.003448 [2] AppendEntries reply: {Term:1 Success:true}
09:17:39.003512 [1] election timer started (196ms), term=1
09:17:39.003923 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:39.004316 [0] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:39.004348 [0] while waiting for reply, state = Leader
09:17:39.006938 [2] in election timer term changed from 0 to 1, bailing out
09:17:39.006999 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.007054 [1] AppendEntries reply: {Term:1 Success:true}
09:17:39.007206 [1] in election timer term changed from 0 to 1, bailing out
09:17:39.007245 [0] in election timer state=Leader, bailing out
09:17:39.007557 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:39.050983 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.051025 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.052511 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.052592 [1] AppendEntries reply: {Term:1 Success:true}
09:17:39.052894 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:39.057214 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.057263 [2] AppendEntries reply: {Term:1 Success:true}
09:17:39.057558 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:39.098075 [TEST] Disconnect 0
09:17:39.098812 [TEST] Disconnect 1
09:17:39.101435 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.101517 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.151660 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.151686 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.200646 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.200663 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.251118 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.251134 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.254305 [1] becomes Candidate (currentTerm=2); log=[]
09:17:39.254419 [1] election timer started (194ms), term=2
09:17:39.254474 [1] sending RequestVote to 0: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.254504 [1] sending RequestVote to 2: {Term:2 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.300635 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.300709 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.320729 [2] becomes Candidate (currentTerm=2); log=[]
09:17:39.320870 [2] sending RequestVote to 1: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.320929 [2] sending RequestVote to 0: {Term:2 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.320961 [2] election timer started (204ms), term=2
09:17:39.351208 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.351233 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.401672 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.401738 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.410154 [TEST] Reconnect 1
09:17:39.411369 [TEST] Reconnect 0
09:17:39.451109 [0] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.451139 [0] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.454817 [1] becomes Candidate (currentTerm=3); log=[]
09:17:39.455028 [1] sending RequestVote to 2: {Term:3 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.455033 [1] election timer started (238ms), term=3
09:17:39.455100 [1] sending RequestVote to 0: {Term:3 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.455817 [1] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.455862 [1] AppendEntries reply: {Term:3 Success:false}
09:17:39.455821 [2] AppendEntries: {Term:1 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.455963 [2] AppendEntries reply: {Term:2 Success:false}
09:17:39.456747 [0] term out of date in heartbeat reply
09:17:39.456792 [0] becomes Follower with term=3; log=[]
09:17:39.456876 [0] election timer started (161ms), term=3
09:17:39.460743 [0] RequestVote: {Term:3 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=3, votedFor=-1, log index/term=(-1, -1)]
09:17:39.460872 [0] ... RequestVote reply: &{Term:3 VoteGranted:true}
09:17:39.461258 [2] RequestVote: {Term:3 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=2, votedFor=2, log index/term=(-1, -1)]
09:17:39.461289 [2] ... term out of date in RequestVote
09:17:39.461316 [2] becomes Follower with term=3; log=[]
09:17:39.461429 [2] ... RequestVote reply: &{Term:3 VoteGranted:true}
09:17:39.461578 [2] election timer started (219ms), term=3
09:17:39.461750 [1] received RequestVoteReply {Term:3 VoteGranted:true}
09:17:39.461789 [1] wins election with 2 votes
09:17:39.461918 [1] becomes Leader; term=3, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
09:17:39.462161 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.462216 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.462438 [1] received RequestVoteReply {Term:3 VoteGranted:true}
09:17:39.462485 [1] while waiting for reply, state = Leader
09:17:39.465852 [1] in election timer state=Leader, bailing out
09:17:39.468218 [2] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.468225 [0] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.468356 [2] AppendEntries reply: {Term:3 Success:true}
09:17:39.468411 [0] AppendEntries reply: {Term:3 Success:true}
09:17:39.469096 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:39.469194 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:39.472089 [2] in election timer term changed from 2 to 3, bailing out
09:17:39.512203 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.512248 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.513882 [0] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.513929 [0] AppendEntries reply: {Term:3 Success:true}
09:17:39.514287 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:39.517652 [2] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.517718 [2] AppendEntries reply: {Term:3 Success:true}
09:17:39.517973 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:39.562325 [TEST] Disconnect 1
09:17:39.562396 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.562400 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.563225 [TEST] Disconnect 2
09:17:39.612875 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.612875 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.663189 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.663193 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.677755 [0] becomes Candidate (currentTerm=4); log=[]
09:17:39.677867 [0] election timer started (268ms), term=4
09:17:39.677945 [0] sending RequestVote to 1: {Term:4 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.677952 [0] sending RequestVote to 2: {Term:4 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.712701 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.712790 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.742364 [2] becomes Candidate (currentTerm=4); log=[]
09:17:39.742537 [2] sending RequestVote to 0: {Term:4 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.742572 [2] sending RequestVote to 1: {Term:4 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.742554 [2] election timer started (175ms), term=4
09:17:39.762728 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.762788 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.812128 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.812181 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.862319 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.862321 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.873791 [TEST] Reconnect 2
09:17:39.875095 [TEST] Reconnect 1
09:17:39.912819 [1] sending AppendEntries to 2: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.912888 [1] sending AppendEntries to 0: ni=0, args={Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.917246 [0] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.917309 [0] AppendEntries reply: {Term:4 Success:false}
09:17:39.918150 [1] term out of date in heartbeat reply
09:17:39.918199 [1] becomes Follower with term=4; log=[]
09:17:39.918202 [2] AppendEntries: {Term:3 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.918266 [2] AppendEntries reply: {Term:4 Success:false}
09:17:39.918275 [1] election timer started (207ms), term=4
09:17:39.923839 [2] becomes Candidate (currentTerm=5); log=[]
09:17:39.923942 [2] election timer started (151ms), term=5
09:17:39.923992 [2] sending RequestVote to 0: {Term:5 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.924045 [2] sending RequestVote to 1: {Term:5 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:39.927698 [0] RequestVote: {Term:5 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=4, votedFor=0, log index/term=(-1, -1)]
09:17:39.927891 [0] ... term out of date in RequestVote
09:17:39.927958 [0] becomes Follower with term=5; log=[]
09:17:39.928221 [0] ... RequestVote reply: &{Term:5 VoteGranted:true}
09:17:39.928307 [0] in election timer term changed from 4 to 5, bailing out
09:17:39.928387 [0] election timer started (243ms), term=5
09:17:39.929196 [2] received RequestVoteReply {Term:5 VoteGranted:true}
09:17:39.929250 [2] wins election with 2 votes
09:17:39.929197 [1] RequestVote: {Term:5 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=4, votedFor=-1, log index/term=(-1, -1)]
09:17:39.929369 [2] becomes Leader; term=5, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
09:17:39.929373 [1] ... term out of date in RequestVote
09:17:39.929432 [1] becomes Follower with term=5; log=[]
09:17:39.929533 [2] sending AppendEntries to 1: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.929555 [2] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.929569 [1] ... RequestVote reply: &{Term:5 VoteGranted:true}
09:17:39.929873 [1] election timer started (287ms), term=5
09:17:39.930933 [2] received RequestVoteReply {Term:5 VoteGranted:true}
09:17:39.930984 [2] while waiting for reply, state = Leader
09:17:39.932837 [1] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.932890 [1] AppendEntries reply: {Term:5 Success:true}
09:17:39.933424 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:39.934235 [2] in election timer state=Leader, bailing out
09:17:39.936485 [0] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.936559 [0] AppendEntries reply: {Term:5 Success:true}
09:17:39.937131 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:39.939087 [1] in election timer term changed from 4 to 5, bailing out
09:17:39.979804 [2] sending AppendEntries to 1: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.979865 [2] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.981542 [0] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.981588 [0] AppendEntries reply: {Term:5 Success:true}
09:17:39.981862 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:39.983984 [1] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:39.984070 [1] AppendEntries reply: {Term:5 Success:true}
09:17:39.984335 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:40.026412 [TEST] Disconnect 2
09:17:40.027427 [TEST] Disconnect 0
09:17:40.030308 [2] sending AppendEntries to 1: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.030308 [2] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.079756 [2] sending AppendEntries to 1: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.079771 [2] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.129566 [2] sending AppendEntries to 1: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.129612 [2] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.179783 [2] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.179803 [2] sending AppendEntries to 1: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.228923 [0] becomes Candidate (currentTerm=6); log=[]
09:17:40.229085 [0] sending RequestVote to 2: {Term:6 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.229106 [0] sending RequestVote to 1: {Term:6 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.229099 [0] election timer started (220ms), term=6
09:17:40.230141 [2] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.230245 [2] sending AppendEntries to 1: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.279990 [1] becomes Candidate (currentTerm=6); log=[]
09:17:40.280165 [1] sending RequestVote to 0: {Term:6 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.280170 [2] sending AppendEntries to 1: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.280240 [1] election timer started (253ms), term=6
09:17:40.280208 [2] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.280299 [1] sending RequestVote to 2: {Term:6 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.330683 [2] sending AppendEntries to 1: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.330683 [2] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.338830 [TEST] Reconnect 0
09:17:40.339933 [TEST] Reconnect 2
09:17:40.380525 [2] sending AppendEntries to 0: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.380526 [2] sending AppendEntries to 1: ni=0, args={Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.383293 [1] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.383342 [1] AppendEntries reply: {Term:6 Success:false}
09:17:40.384043 [2] term out of date in heartbeat reply
09:17:40.384086 [2] becomes Follower with term=6; log=[]
09:17:40.384145 [2] election timer started (253ms), term=6
09:17:40.385876 [0] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.385915 [0] AppendEntries reply: {Term:6 Success:false}
09:17:40.449604 [0] becomes Candidate (currentTerm=7); log=[]
09:17:40.449748 [0] sending RequestVote to 1: {Term:7 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.449806 [0] sending RequestVote to 2: {Term:7 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.449821 [0] election timer started (150ms), term=7
09:17:40.452392 [1] RequestVote: {Term:7 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=6, votedFor=1, log index/term=(-1, -1)]
09:17:40.452422 [1] ... term out of date in RequestVote
09:17:40.452446 [1] becomes Follower with term=7; log=[]
09:17:40.452551 [1] ... RequestVote reply: &{Term:7 VoteGranted:true}
09:17:40.452617 [1] election timer started (298ms), term=7
09:17:40.452817 [2] RequestVote: {Term:7 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=6, votedFor=-1, log index/term=(-1, -1)]
09:17:40.452839 [2] ... term out of date in RequestVote
09:17:40.452861 [2] becomes Follower with term=7; log=[]
09:17:40.452937 [2] ... RequestVote reply: &{Term:7 VoteGranted:true}
09:17:40.453075 [2] election timer started (299ms), term=7
09:17:40.453239 [0] received RequestVoteReply {Term:7 VoteGranted:true}
09:17:40.453267 [0] wins election with 2 votes
09:17:40.453343 [0] becomes Leader; term=7, nextIndex=map[1:0 2:0], matchIndex=map[1:-1 2:-1]; log=[]
09:17:40.453471 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.453476 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.453608 [0] received RequestVoteReply {Term:7 VoteGranted:true}
09:17:40.453658 [0] while waiting for reply, state = Leader
09:17:40.454892 [2] in election timer term changed from 6 to 7, bailing out
09:17:40.458135 [1] AppendEntries: {Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.458167 [2] AppendEntries: {Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.458191 [1] AppendEntries reply: {Term:7 Success:true}
09:17:40.458237 [2] AppendEntries reply: {Term:7 Success:true}
09:17:40.458679 [0] AppendEntries reply from 2 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:40.458783 [0] AppendEntries reply from 1 success: nextIndex := map[1:0 2:0], matchIndex := map[1:-1 2:-1]
09:17:40.460708 [1] in election timer term changed from 6 to 7, bailing out
09:17:40.460781 [0] in election timer state=Leader, bailing out
09:17:40.490866 [TEST] Disconnect 0
09:17:40.491267 [TEST] Disconnect 1
09:17:40.504223 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.504223 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.553837 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.553870 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.603621 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.603645 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.653567 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.653607 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.703528 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.703533 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.754397 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.754397 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.763556 [1] becomes Candidate (currentTerm=8); log=[]
09:17:40.763662 [2] becomes Candidate (currentTerm=8); log=[]
09:17:40.763686 [1] election timer started (154ms), term=8
09:17:40.763783 [1] sending RequestVote to 0: {Term:8 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.763825 [2] sending RequestVote to 0: {Term:8 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.763784 [1] sending RequestVote to 2: {Term:8 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.763790 [2] election timer started (256ms), term=8
09:17:40.763900 [2] sending RequestVote to 1: {Term:8 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.802251 [TEST] Reconnect 1
09:17:40.803453 [TEST] Reconnect 0
09:17:40.803516 [0] sending AppendEntries to 1: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.803539 [0] sending AppendEntries to 2: ni=0, args={Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.806046 [2] AppendEntries: {Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.806089 [2] AppendEntries reply: {Term:8 Success:false}
09:17:40.806745 [0] term out of date in heartbeat reply
09:17:40.806781 [0] becomes Follower with term=8; log=[]
09:17:40.806913 [0] election timer started (207ms), term=8
09:17:40.809556 [1] AppendEntries: {Term:7 LeaderId:0 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.809594 [1] AppendEntries reply: {Term:8 Success:false}
09:17:40.924422 [1] becomes Candidate (currentTerm=9); log=[]
09:17:40.924590 [1] sending RequestVote to 2: {Term:9 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.924640 [1] election timer started (151ms), term=9
09:17:40.924645 [1] sending RequestVote to 0: {Term:9 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:40.926567 [0] RequestVote: {Term:9 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=8, votedFor=-1, log index/term=(-1, -1)]
09:17:40.926613 [0] ... term out of date in RequestVote
09:17:40.926646 [0] becomes Follower with term=9; log=[]
09:17:40.926737 [0] ... RequestVote reply: &{Term:9 VoteGranted:true}
09:17:40.926917 [0] election timer started (284ms), term=9
09:17:40.926981 [0] in election timer term changed from 8 to 9, bailing out
09:17:40.927357 [1] received RequestVoteReply {Term:9 VoteGranted:true}
09:17:40.927386 [1] wins election with 2 votes
09:17:40.927445 [1] becomes Leader; term=9, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
09:17:40.927548 [1] sending AppendEntries to 0: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.927615 [1] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.929424 [0] AppendEntries: {Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.929439 [2] RequestVote: {Term:9 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=8, votedFor=2, log index/term=(-1, -1)]
09:17:40.929480 [0] AppendEntries reply: {Term:9 Success:true}
09:17:40.929483 [2] ... term out of date in RequestVote
09:17:40.929538 [2] becomes Follower with term=9; log=[]
09:17:40.929651 [2] ... RequestVote reply: &{Term:9 VoteGranted:true}
09:17:40.929708 [2] election timer started (158ms), term=9
09:17:40.929903 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:40.930370 [1] received RequestVoteReply {Term:9 VoteGranted:true}
09:17:40.930399 [1] while waiting for reply, state = Leader
09:17:40.932100 [2] AppendEntries: {Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.932145 [2] AppendEntries reply: {Term:9 Success:true}
09:17:40.932527 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:40.934547 [2] in election timer term changed from 8 to 9, bailing out
09:17:40.935776 [1] in election timer state=Leader, bailing out
09:17:40.955023 [TEST] Disconnect 1
09:17:40.955352 [TEST] Disconnect 2
09:17:40.977769 [1] sending AppendEntries to 0: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:40.977773 [1] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.028866 [1] sending AppendEntries to 0: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.028911 [1] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.077817 [1] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.077828 [1] sending AppendEntries to 0: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.090259 [2] becomes Candidate (currentTerm=10); log=[]
09:17:41.090373 [2] election timer started (195ms), term=10
09:17:41.090424 [2] sending RequestVote to 0: {Term:10 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:41.090444 [2] sending RequestVote to 1: {Term:10 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:41.127908 [1] sending AppendEntries to 0: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.127909 [1] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.177682 [1] sending AppendEntries to 0: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.177726 [1] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.217999 [0] becomes Candidate (currentTerm=10); log=[]
09:17:41.218161 [0] sending RequestVote to 1: {Term:10 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:41.218171 [0] sending RequestVote to 2: {Term:10 CandidateId:0 LastLogIndex:-1 LastLogTerm:-1}
09:17:41.218232 [0] election timer started (275ms), term=10
09:17:41.228713 [1] sending AppendEntries to 0: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.228769 [1] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.265929 [TEST] Reconnect 2
09:17:41.267331 [TEST] Reconnect 1
09:17:41.279164 [1] sending AppendEntries to 2: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.279164 [1] sending AppendEntries to 0: ni=0, args={Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.283382 [0] AppendEntries: {Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.283438 [0] AppendEntries reply: {Term:10 Success:false}
09:17:41.284216 [1] term out of date in heartbeat reply
09:17:41.284258 [1] becomes Follower with term=10; log=[]
09:17:41.284354 [1] election timer started (290ms), term=10
09:17:41.284963 [2] AppendEntries: {Term:9 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.285029 [2] AppendEntries reply: {Term:10 Success:false}
09:17:41.290969 [2] becomes Candidate (currentTerm=11); log=[]
09:17:41.291146 [2] sending RequestVote to 0: {Term:11 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:41.291163 [2] sending RequestVote to 1: {Term:11 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:41.291153 [2] election timer started (295ms), term=11
09:17:41.293353 [0] RequestVote: {Term:11 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=10, votedFor=0, log index/term=(-1, -1)]
09:17:41.293381 [0] ... term out of date in RequestVote
09:17:41.293412 [0] becomes Follower with term=11; log=[]
09:17:41.293510 [0] ... RequestVote reply: &{Term:11 VoteGranted:true}
09:17:41.293571 [0] election timer started (185ms), term=11
09:17:41.294117 [2] received RequestVoteReply {Term:11 VoteGranted:true}
09:17:41.294171 [2] wins election with 2 votes
09:17:41.294243 [2] becomes Leader; term=11, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
09:17:41.294360 [1] RequestVote: {Term:11 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=10, votedFor=-1, log index/term=(-1, -1)]
09:17:41.294400 [1] ... term out of date in RequestVote
09:17:41.294473 [1] becomes Follower with term=11; log=[]
09:17:41.294574 [2] sending AppendEntries to 1: ni=0, args={Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.294487 [2] sending AppendEntries to 0: ni=0, args={Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.294600 [1] ... RequestVote reply: &{Term:11 VoteGranted:true}
09:17:41.294914 [1] in election timer term changed from 10 to 11, bailing out
09:17:41.295009 [1] election timer started (193ms), term=11
09:17:41.296247 [2] received RequestVoteReply {Term:11 VoteGranted:true}
09:17:41.296315 [2] while waiting for reply, state = Leader
09:17:41.298456 [0] in election timer term changed from 10 to 11, bailing out
09:17:41.300717 [0] AppendEntries: {Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.300774 [0] AppendEntries reply: {Term:11 Success:true}
09:17:41.301154 [1] AppendEntries: {Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.301225 [1] AppendEntries reply: {Term:11 Success:true}
09:17:41.301392 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.301489 [2] in election timer state=Leader, bailing out
09:17:41.301845 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.344725 [2] sending AppendEntries to 0: ni=0, args={Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.344725 [2] sending AppendEntries to 1: ni=0, args={Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.347419 [0] AppendEntries: {Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.347485 [0] AppendEntries reply: {Term:11 Success:true}
09:17:41.347845 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.348915 [1] AppendEntries: {Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.348997 [1] AppendEntries reply: {Term:11 Success:true}
09:17:41.349354 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.395802 [2] sending AppendEntries to 0: ni=0, args={Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.395820 [2] sending AppendEntries to 1: ni=0, args={Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.398906 [1] AppendEntries: {Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.398972 [1] AppendEntries reply: {Term:11 Success:true}
09:17:41.399320 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.400323 [0] AppendEntries: {Term:11 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.400373 [0] AppendEntries reply: {Term:11 Success:true}
09:17:41.400636 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.419327 [0] becomes Dead
09:17:41.419390 [0] commitChanSender done
09:17:41.419417 [1] becomes Dead
09:17:41.419510 [1] commitChanSender done
09:17:41.419517 [2] becomes Dead
09:17:41.419573 [2] commitChanSender done
09:17:41.423796 [0] in election timer state=Dead, bailing out
09:17:41.425160 [1] in election timer state=Dead, bailing out
--- PASS: TestElectionDisconnectLoop (2.69s)
=== RUN   TestCommitOneCommand
09:17:41.477490 [0] listening at [::]:38075
09:17:41.477827 [1] listening at [::]:36197
09:17:41.478132 [2] listening at [::]:33081
09:17:41.481161 [2] election timer started (164ms), term=0
09:17:41.481192 [0] election timer started (264ms), term=0
09:17:41.481167 [1] election timer started (263ms), term=0
09:17:41.652055 [2] becomes Candidate (currentTerm=1); log=[]
09:17:41.652160 [2] election timer started (169ms), term=1
09:17:41.652174 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:41.652231 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:41.656132 [1] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:41.656161 [1] ... term out of date in RequestVote
09:17:41.656181 [1] becomes Follower with term=1; log=[]
09:17:41.656277 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:41.656342 [1] election timer started (220ms), term=1
09:17:41.657136 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:41.657178 [2] wins election with 2 votes
09:17:41.657274 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
09:17:41.657423 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.657478 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.658127 [0] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:41.658164 [0] ... term out of date in RequestVote
09:17:41.658208 [0] becomes Follower with term=1; log=[]
09:17:41.658327 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:41.658468 [0] election timer started (151ms), term=1
09:17:41.659263 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:41.659310 [2] while waiting for reply, state = Leader
09:17:41.660920 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.660968 [0] AppendEntries reply: {Term:1 Success:true}
09:17:41.661392 [0] in election timer term changed from 0 to 1, bailing out
09:17:41.661416 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.661406 [1] in election timer term changed from 0 to 1, bailing out
09:17:41.662305 [2] in election timer state=Leader, bailing out
09:17:41.663446 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.663493 [1] AppendEntries reply: {Term:1 Success:true}
09:17:41.663997 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.708185 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.708218 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.710641 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.710703 [0] AppendEntries reply: {Term:1 Success:true}
09:17:41.711072 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.712166 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.712295 [1] AppendEntries reply: {Term:1 Success:true}
09:17:41.713324 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.757536 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.757729 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.761394 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.761460 [0] AppendEntries reply: {Term:1 Success:true}
09:17:41.761952 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.762103 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:41.762178 [1] AppendEntries reply: {Term:1 Success:true}
09:17:41.763066 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:41.781909 [TEST] submitting 42 to 2
09:17:41.782057 [2] Submit received by Leader: 42
09:17:41.782186 [2] ... log=[{42 1}]
09:17:41.807970 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
09:17:41.808474 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
09:17:41.810507 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
09:17:41.810586 [0] ... inserting entries [{42 1}] from index 0
09:17:41.810634 [0] ... log is now: [{42 1}]
09:17:41.810677 [0] AppendEntries reply: {Term:1 Success:true}
09:17:41.811004 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
09:17:41.811091 [1] ... inserting entries [{42 1}] from index 0
09:17:41.811134 [1] ... log is now: [{42 1}]
09:17:41.811172 [1] AppendEntries reply: {Term:1 Success:true}
09:17:41.811547 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:0], matchIndex := map[0:0 1:-1]
09:17:41.811591 [2] leader sets commitIndex := 0
09:17:41.811705 [2] commitChanSender entries=[{42 1}], savedLastApplied=-1
09:17:41.811794 [TEST] collectCommits(2) got {Command:42 Index:0 Term:1}
09:17:41.812194 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]
09:17:41.858433 [2] sending AppendEntries to 1: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:41.858441 [2] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:41.861150 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:41.861190 [0] ... setting commitIndex=0
09:17:41.861243 [0] AppendEntries reply: {Term:1 Success:true}
09:17:41.861373 [0] commitChanSender entries=[{42 1}], savedLastApplied=-1
09:17:41.861487 [TEST] collectCommits(0) got {Command:42 Index:0 Term:1}
09:17:41.861636 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]
09:17:41.864832 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:41.864893 [1] ... setting commitIndex=0
09:17:41.864961 [1] AppendEntries reply: {Term:1 Success:true}
09:17:41.865137 [1] commitChanSender entries=[{42 1}], savedLastApplied=-1
09:17:41.865263 [TEST] collectCommits(1) got {Command:42 Index:0 Term:1}
09:17:41.865376 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]
09:17:41.908491 [2] sending AppendEntries to 1: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:41.908510 [2] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:41.909992 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:41.910039 [1] AppendEntries reply: {Term:1 Success:true}
09:17:41.910338 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]
09:17:41.911294 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:41.911335 [0] AppendEntries reply: {Term:1 Success:true}
09:17:41.911653 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]
09:17:41.933833 [0] becomes Dead
09:17:41.933965 [0] commitChanSender done
09:17:41.934069 [1] becomes Dead
09:17:41.934185 [1] commitChanSender done
09:17:41.934224 [2] becomes Dead
09:17:41.934325 [2] commitChanSender done
09:17:41.937624 [1] in election timer state=Dead, bailing out
09:17:41.938567 [0] in election timer state=Dead, bailing out
--- PASS: TestCommitOneCommand (0.52s)
=== RUN   TestSubmitNonLeaderFails
09:17:41.990590 [0] listening at [::]:44509
09:17:41.990764 [1] listening at [::]:41829
09:17:41.990972 [2] listening at [::]:37211
09:17:41.993884 [1] election timer started (208ms), term=0
09:17:41.993903 [0] election timer started (217ms), term=0
09:17:41.993895 [2] election timer started (237ms), term=0
09:17:42.204222 [1] becomes Candidate (currentTerm=1); log=[]
09:17:42.204376 [1] sending RequestVote to 2: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:42.204385 [1] election timer started (272ms), term=1
09:17:42.204435 [1] sending RequestVote to 0: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1}
09:17:42.206313 [2] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:42.206340 [2] ... term out of date in RequestVote
09:17:42.206373 [2] becomes Follower with term=1; log=[]
09:17:42.206471 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:42.206553 [2] election timer started (231ms), term=1
09:17:42.207100 [1] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:42.207136 [1] wins election with 2 votes
09:17:42.207217 [1] becomes Leader; term=1, nextIndex=map[0:0 2:0], matchIndex=map[0:-1 2:-1]; log=[]
09:17:42.207328 [0] RequestVote: {Term:1 CandidateId:1 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:42.207351 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.207369 [0] ... term out of date in RequestVote
09:17:42.207385 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.207440 [0] becomes Follower with term=1; log=[]
09:17:42.207629 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:42.207727 [0] election timer started (173ms), term=1
09:17:42.208365 [1] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:42.208397 [1] while waiting for reply, state = Leader
09:17:42.211278 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.211317 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.211730 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:42.213751 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.213806 [2] AppendEntries reply: {Term:1 Success:true}
09:17:42.214150 [0] in election timer term changed from 0 to 1, bailing out
09:17:42.214207 [2] in election timer term changed from 0 to 1, bailing out
09:17:42.214444 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:42.214519 [1] in election timer state=Leader, bailing out
09:17:42.257726 [1] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.257749 [1] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.261358 [2] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.261416 [2] AppendEntries reply: {Term:1 Success:true}
09:17:42.261848 [1] AppendEntries reply from 2 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:42.262887 [0] AppendEntries: {Term:1 LeaderId:1 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.262991 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.264070 [1] AppendEntries reply from 0 success: nextIndex := map[0:0 2:0], matchIndex := map[0:-1 2:-1]
09:17:42.295132 [TEST] submitting 42 to 2
09:17:42.295216 [2] Submit received by Follower: 42
09:17:42.306177 [0] becomes Dead
09:17:42.306253 [0] commitChanSender done
09:17:42.306280 [1] becomes Dead
09:17:42.306339 [1] commitChanSender done
09:17:42.306356 [2] becomes Dead
09:17:42.306398 [2] commitChanSender done
--- PASS: TestSubmitNonLeaderFails (0.32s)
=== RUN   TestCommitMultipleCommands
09:17:42.306718 [2] in election timer state=Dead, bailing out
09:17:42.307975 [0] in election timer state=Dead, bailing out
09:17:42.308231 [0] listening at [::]:36581
09:17:42.308412 [1] listening at [::]:38047
09:17:42.308610 [2] listening at [::]:33515
09:17:42.310270 [2] election timer started (169ms), term=0
09:17:42.310303 [1] election timer started (193ms), term=0
09:17:42.310280 [0] election timer started (275ms), term=0
09:17:42.480771 [2] becomes Candidate (currentTerm=1); log=[]
09:17:42.480876 [2] election timer started (285ms), term=1
09:17:42.480961 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:42.481005 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:42.484109 [0] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:42.484139 [0] ... term out of date in RequestVote
09:17:42.484169 [0] becomes Follower with term=1; log=[]
09:17:42.484188 [1] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:42.484222 [1] ... term out of date in RequestVote
09:17:42.484253 [1] becomes Follower with term=1; log=[]
09:17:42.484266 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:42.484394 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:42.484408 [0] election timer started (273ms), term=1
09:17:42.484540 [1] election timer started (170ms), term=1
09:17:42.485102 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:42.485143 [2] wins election with 2 votes
09:17:42.485219 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
09:17:42.485338 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.485345 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:42.485402 [2] while waiting for reply, state = Leader
09:17:42.485510 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.490511 [1] in election timer term changed from 0 to 1, bailing out
09:17:42.490538 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.490608 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.490729 [0] in election timer term changed from 0 to 1, bailing out
09:17:42.491087 [2] in election timer state=Leader, bailing out
09:17:42.491190 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.491250 [1] AppendEntries reply: {Term:1 Success:true}
09:17:42.491459 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:42.491753 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:42.536500 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.536541 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.539100 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.539151 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.539193 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.539239 [1] AppendEntries reply: {Term:1 Success:true}
09:17:42.539451 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:42.539576 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:42.586107 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.586121 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.589763 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.589768 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:42.589839 [1] AppendEntries reply: {Term:1 Success:true}
09:17:42.589886 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.590198 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:42.590301 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:42.610920 [TEST] submitting 42 to 2
09:17:42.610974 [2] Submit received by Leader: 42
09:17:42.611022 [2] ... log=[{42 1}]
09:17:42.635799 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
09:17:42.635805 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
09:17:42.638750 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
09:17:42.638795 [0] ... inserting entries [{42 1}] from index 0
09:17:42.638822 [0] ... log is now: [{42 1}]
09:17:42.638868 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.639169 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:0], matchIndex := map[0:0 1:-1]
09:17:42.639202 [2] leader sets commitIndex := 0
09:17:42.639298 [2] commitChanSender entries=[{42 1}], savedLastApplied=-1
09:17:42.639352 [TEST] collectCommits(2) got {Command:42 Index:0 Term:1}
09:17:42.640202 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:42 Term:1}] LeaderCommit:-1}
09:17:42.640243 [1] ... inserting entries [{42 1}] from index 0
09:17:42.640274 [1] ... log is now: [{42 1}]
09:17:42.640301 [1] AppendEntries reply: {Term:1 Success:true}
09:17:42.640553 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]
09:17:42.686097 [2] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:42.686131 [2] sending AppendEntries to 1: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:42.688773 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:42.688812 [1] ... setting commitIndex=0
09:17:42.688847 [1] AppendEntries reply: {Term:1 Success:true}
09:17:42.689025 [1] commitChanSender entries=[{42 1}], savedLastApplied=-1
09:17:42.689132 [TEST] collectCommits(1) got {Command:42 Index:0 Term:1}
09:17:42.689233 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]
09:17:42.691265 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[] LeaderCommit:0}
09:17:42.691299 [0] ... setting commitIndex=0
09:17:42.691334 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.691428 [0] commitChanSender entries=[{42 1}], savedLastApplied=-1
09:17:42.691531 [TEST] collectCommits(0) got {Command:42 Index:0 Term:1}
09:17:42.691606 [2] AppendEntries reply from 0 success: nextIndex := map[0:1 1:1], matchIndex := map[0:0 1:0]
09:17:42.712126 [TEST] submitting 55 to 2
09:17:42.712199 [2] Submit received by Leader: 55
09:17:42.712277 [2] ... log=[{42 1} {55 1}]
09:17:42.736505 [2] sending AppendEntries to 0: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:55 Term:1}] LeaderCommit:0}
09:17:42.736569 [2] sending AppendEntries to 1: ni=1, args={Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:55 Term:1}] LeaderCommit:0}
09:17:42.738628 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:55 Term:1}] LeaderCommit:0}
09:17:42.738645 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:0 PrevLogTerm:1 Entries:[{Command:55 Term:1}] LeaderCommit:0}
09:17:42.738681 [0] ... inserting entries [{55 1}] from index 1
09:17:42.738736 [1] ... inserting entries [{55 1}] from index 1
09:17:42.738760 [0] ... log is now: [{42 1} {55 1}]
09:17:42.738795 [1] ... log is now: [{42 1} {55 1}]
09:17:42.738850 [1] AppendEntries reply: {Term:1 Success:true}
09:17:42.738797 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.739276 [2] AppendEntries reply from 1 success: nextIndex := map[0:1 1:2], matchIndex := map[0:0 1:1]
09:17:42.739318 [2] leader sets commitIndex := 1
09:17:42.739444 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:42.739530 [2] commitChanSender entries=[{55 1}], savedLastApplied=0
09:17:42.739598 [TEST] collectCommits(2) got {Command:55 Index:1 Term:1}
09:17:42.785447 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:42.785480 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:42.787000 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:42.787030 [1] ... setting commitIndex=1
09:17:42.787064 [1] AppendEntries reply: {Term:1 Success:true}
09:17:42.787186 [1] commitChanSender entries=[{55 1}], savedLastApplied=0
09:17:42.787261 [TEST] collectCommits(1) got {Command:55 Index:1 Term:1}
09:17:42.787343 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:42.789420 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:42.789448 [0] ... setting commitIndex=1
09:17:42.789478 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.789549 [0] commitChanSender entries=[{55 1}], savedLastApplied=0
09:17:42.789632 [TEST] collectCommits(0) got {Command:55 Index:1 Term:1}
09:17:42.789725 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:42.812448 [TEST] submitting 81 to 2
09:17:42.812522 [2] Submit received by Leader: 81
09:17:42.812591 [2] ... log=[{42 1} {55 1} {81 1}]
09:17:42.835438 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:81 Term:1}] LeaderCommit:1}
09:17:42.835439 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:81 Term:1}] LeaderCommit:1}
09:17:42.839370 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:81 Term:1}] LeaderCommit:1}
09:17:42.839421 [1] ... inserting entries [{81 1}] from index 2
09:17:42.839480 [1] ... log is now: [{42 1} {55 1} {81 1}]
09:17:42.839518 [1] AppendEntries reply: {Term:1 Success:true}
09:17:42.839945 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]
09:17:42.839987 [2] leader sets commitIndex := 2
09:17:42.840096 [2] commitChanSender entries=[{81 1}], savedLastApplied=1
09:17:42.840182 [TEST] collectCommits(2) got {Command:81 Index:2 Term:1}
09:17:42.840182 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:81 Term:1}] LeaderCommit:1}
09:17:42.840266 [0] ... inserting entries [{81 1}] from index 2
09:17:42.840322 [0] ... log is now: [{42 1} {55 1} {81 1}]
09:17:42.840353 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.840662 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:42.886500 [2] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.886505 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.888346 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.888402 [1] ... setting commitIndex=2
09:17:42.888467 [1] AppendEntries reply: {Term:1 Success:true}
09:17:42.888656 [1] commitChanSender entries=[{81 1}], savedLastApplied=1
09:17:42.888751 [TEST] collectCommits(1) got {Command:81 Index:2 Term:1}
09:17:42.889011 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:42.891902 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.891952 [0] ... setting commitIndex=2
09:17:42.892016 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.892148 [0] commitChanSender entries=[{81 1}], savedLastApplied=1
09:17:42.892228 [TEST] collectCommits(0) got {Command:81 Index:2 Term:1}
09:17:42.892522 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:42.935520 [2] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.935531 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.940384 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.940436 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.940785 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:42.941750 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.941793 [1] AppendEntries reply: {Term:1 Success:true}
09:17:42.942109 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:42.985516 [2] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.985529 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.988137 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.988179 [0] AppendEntries reply: {Term:1 Success:true}
09:17:42.988470 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:42.989429 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:42.989465 [1] AppendEntries reply: {Term:1 Success:true}
09:17:42.989767 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:43.035857 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:43.035871 [2] sending AppendEntries to 0: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:43.037462 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:43.037508 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.037808 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:43.038789 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:43.038827 [0] AppendEntries reply: {Term:1 Success:true}
09:17:43.039120 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:43.065135 [0] becomes Dead
09:17:43.065208 [0] commitChanSender done
09:17:43.065253 [1] becomes Dead
09:17:43.065341 [1] commitChanSender done
09:17:43.065360 [2] becomes Dead
09:17:43.065428 [2] commitChanSender done
09:17:43.075251 [0] in election timer state=Dead, bailing out
09:17:43.075293 [1] in election timer state=Dead, bailing out
--- PASS: TestCommitMultipleCommands (0.81s)
=== RUN   TestCommitWithDisconnectionAndRecover
09:17:43.122013 [0] listening at [::]:41879
09:17:43.122268 [1] listening at [::]:37621
09:17:43.122439 [2] listening at [::]:33241
09:17:43.124352 [0] election timer started (262ms), term=0
09:17:43.124358 [1] election timer started (298ms), term=0
09:17:43.124393 [2] election timer started (242ms), term=0
09:17:43.374931 [2] becomes Candidate (currentTerm=1); log=[]
09:17:43.375078 [2] election timer started (241ms), term=1
09:17:43.375190 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:43.375199 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:43.377172 [0] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:43.377203 [0] ... term out of date in RequestVote
09:17:43.377234 [0] becomes Follower with term=1; log=[]
09:17:43.377333 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:43.377452 [0] election timer started (205ms), term=1
09:17:43.377986 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:43.378019 [2] wins election with 2 votes
09:17:43.378098 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
09:17:43.378227 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:43.378268 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:43.379647 [1] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:43.379683 [1] ... term out of date in RequestVote
09:17:43.379720 [1] becomes Follower with term=1; log=[]
09:17:43.379834 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:43.379923 [1] election timer started (294ms), term=1
09:17:43.380525 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:43.380554 [2] while waiting for reply, state = Leader
09:17:43.383330 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:43.383382 [0] AppendEntries reply: {Term:1 Success:true}
09:17:43.383883 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:43.384763 [1] in election timer term changed from 0 to 1, bailing out
09:17:43.384809 [0] in election timer term changed from 0 to 1, bailing out
09:17:43.384852 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:43.384910 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.385344 [2] in election timer state=Leader, bailing out
09:17:43.385555 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:43.425064 [2] Submit received by Leader: 5
09:17:43.425129 [2] ... log=[{5 1}]
09:17:43.425157 [2] Submit received by Leader: 6
09:17:43.425208 [2] ... log=[{5 1} {6 1}]
09:17:43.428379 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:43.428379 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:43.431647 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:43.431765 [0] ... inserting entries [{5 1} {6 1}] from index 0
09:17:43.431819 [0] ... log is now: [{5 1} {6 1}]
09:17:43.431876 [0] AppendEntries reply: {Term:1 Success:true}
09:17:43.432428 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:43.432491 [1] ... inserting entries [{5 1} {6 1}] from index 0
09:17:43.432514 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:0], matchIndex := map[0:1 1:-1]
09:17:43.432549 [1] ... log is now: [{5 1} {6 1}]
09:17:43.432574 [2] leader sets commitIndex := 1
09:17:43.432597 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.432691 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
09:17:43.432789 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
09:17:43.432839 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
09:17:43.432916 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.479168 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.479168 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.482655 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.482708 [1] ... setting commitIndex=1
09:17:43.482771 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.482996 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
09:17:43.483145 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
09:17:43.483187 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.483214 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
09:17:43.485321 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.485394 [0] ... setting commitIndex=1
09:17:43.485465 [0] AppendEntries reply: {Term:1 Success:true}
09:17:43.485661 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
09:17:43.485798 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
09:17:43.485853 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
09:17:43.485965 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.528321 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.528344 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.529890 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.529952 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.530277 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.534524 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.534650 [0] AppendEntries reply: {Term:1 Success:true}
09:17:43.535304 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.579027 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.579060 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.581708 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.581808 [0] AppendEntries reply: {Term:1 Success:true}
09:17:43.582320 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.583447 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.583501 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.583793 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.628317 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.628399 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.629910 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.629956 [0] AppendEntries reply: {Term:1 Success:true}
09:17:43.630243 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.633331 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.633393 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.633698 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.675748 [TEST] Disconnect 0
09:17:43.678446 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.678507 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.680041 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.680096 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.680405 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.729108 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.729398 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.733269 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.733344 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.733701 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.778997 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.779030 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.785539 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.785611 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.785963 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.829034 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.829068 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.833507 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.833560 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.833882 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.838005 [0] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
09:17:43.838130 [0] sending RequestVote to 2: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
09:17:43.838203 [0] election timer started (256ms), term=2
09:17:43.838214 [0] sending RequestVote to 1: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
09:17:43.878486 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.878520 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.882245 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:43.882366 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.882763 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:43.926974 [2] Submit received by Leader: 7
09:17:43.927093 [2] ... log=[{5 1} {6 1} {7 1}]
09:17:43.929275 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:43.929331 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:43.931887 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:43.931948 [1] ... inserting entries [{7 1}] from index 2
09:17:43.932009 [1] ... log is now: [{5 1} {6 1} {7 1}]
09:17:43.932052 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.932342 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]
09:17:43.932374 [2] leader sets commitIndex := 2
09:17:43.932439 [2] commitChanSender entries=[{7 1}], savedLastApplied=1
09:17:43.932488 [TEST] collectCommits(2) got {Command:7 Index:2 Term:1}
09:17:43.978592 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
09:17:43.978608 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:43.984150 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:43.984187 [1] ... setting commitIndex=2
09:17:43.984238 [1] AppendEntries reply: {Term:1 Success:true}
09:17:43.984393 [1] commitChanSender entries=[{7 1}], savedLastApplied=1
09:17:43.984507 [TEST] collectCommits(1) got {Command:7 Index:2 Term:1}
09:17:43.984869 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]
09:17:44.028747 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.028808 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
09:17:44.033174 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.033224 [1] AppendEntries reply: {Term:1 Success:true}
09:17:44.033607 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]
09:17:44.078686 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
09:17:44.078705 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.084195 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.084274 [1] AppendEntries reply: {Term:1 Success:true}
09:17:44.084712 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]
09:17:44.099349 [0] becomes Candidate (currentTerm=3); log=[{5 1} {6 1}]
09:17:44.099503 [0] election timer started (241ms), term=3
09:17:44.099572 [0] sending RequestVote to 2: {Term:3 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
09:17:44.099602 [0] sending RequestVote to 1: {Term:3 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
09:17:44.128308 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.128360 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
09:17:44.132255 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.132444 [1] AppendEntries reply: {Term:1 Success:true}
09:17:44.133350 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]
09:17:44.177719 [TEST] Reconnect 0
09:17:44.178316 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.178531 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
09:17:44.182713 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.182771 [1] AppendEntries reply: {Term:1 Success:true}
09:17:44.183174 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]
09:17:44.228723 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
09:17:44.228772 [2] sending AppendEntries to 1: ni=3, args={Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.231412 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.231487 [1] AppendEntries reply: {Term:1 Success:true}
09:17:44.231649 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
09:17:44.231734 [0] AppendEntries reply: {Term:3 Success:false}
09:17:44.232439 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:1 1:2]
09:17:44.233358 [2] term out of date in heartbeat reply
09:17:44.233444 [2] becomes Follower with term=3; log=[{5 1} {6 1} {7 1}]
09:17:44.233539 [2] election timer started (227ms), term=3
09:17:44.340656 [0] becomes Candidate (currentTerm=4); log=[{5 1} {6 1}]
09:17:44.340794 [0] election timer started (297ms), term=4
09:17:44.340824 [0] sending RequestVote to 1: {Term:4 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
09:17:44.340872 [0] sending RequestVote to 2: {Term:4 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
09:17:44.344964 [2] RequestVote: {Term:4 CandidateId:0 LastLogIndex:1 LastLogTerm:1} [currentTerm=3, votedFor=-1, log index/term=(2, 1)]
09:17:44.344995 [2] ... term out of date in RequestVote
09:17:44.345088 [2] becomes Follower with term=4; log=[{5 1} {6 1} {7 1}]
09:17:44.345130 [2] ... RequestVote reply: &{Term:4 VoteGranted:false}
09:17:44.345206 [2] election timer started (168ms), term=4
09:17:44.345717 [0] received RequestVoteReply {Term:4 VoteGranted:false}
09:17:44.345784 [1] RequestVote: {Term:4 CandidateId:0 LastLogIndex:1 LastLogTerm:1} [currentTerm=1, votedFor=2, log index/term=(2, 1)]
09:17:44.345827 [1] ... term out of date in RequestVote
09:17:44.345940 [1] becomes Follower with term=4; log=[{5 1} {6 1} {7 1}]
09:17:44.345999 [1] ... RequestVote reply: &{Term:4 VoteGranted:false}
09:17:44.346103 [1] election timer started (178ms), term=4
09:17:44.346665 [0] received RequestVoteReply {Term:4 VoteGranted:false}
09:17:44.350514 [1] in election timer term changed from 1 to 4, bailing out
09:17:44.353924 [2] in election timer term changed from 3 to 4, bailing out
09:17:44.515965 [2] becomes Candidate (currentTerm=5); log=[{5 1} {6 1} {7 1}]
09:17:44.516102 [2] sending RequestVote to 0: {Term:5 CandidateId:2 LastLogIndex:2 LastLogTerm:1}
09:17:44.516133 [2] election timer started (291ms), term=5
09:17:44.516144 [2] sending RequestVote to 1: {Term:5 CandidateId:2 LastLogIndex:2 LastLogTerm:1}
09:17:44.521764 [1] RequestVote: {Term:5 CandidateId:2 LastLogIndex:2 LastLogTerm:1} [currentTerm=4, votedFor=-1, log index/term=(2, 1)]
09:17:44.521819 [0] RequestVote: {Term:5 CandidateId:2 LastLogIndex:2 LastLogTerm:1} [currentTerm=4, votedFor=0, log index/term=(1, 1)]
09:17:44.521886 [0] ... term out of date in RequestVote
09:17:44.521821 [1] ... term out of date in RequestVote
09:17:44.522032 [0] becomes Follower with term=5; log=[{5 1} {6 1}]
09:17:44.522108 [0] ... RequestVote reply: &{Term:5 VoteGranted:true}
09:17:44.522118 [1] becomes Follower with term=5; log=[{5 1} {6 1} {7 1}]
09:17:44.522205 [1] ... RequestVote reply: &{Term:5 VoteGranted:true}
09:17:44.522239 [0] election timer started (195ms), term=5
09:17:44.522265 [1] election timer started (196ms), term=5
09:17:44.522489 [2] received RequestVoteReply {Term:5 VoteGranted:true}
09:17:44.522522 [2] wins election with 2 votes
09:17:44.522629 [2] becomes Leader; term=5, nextIndex=map[0:3 1:3], matchIndex=map[0:-1 1:-1]; log=[{5 1} {6 1} {7 1}]
09:17:44.522694 [2] received RequestVoteReply {Term:5 VoteGranted:true}
09:17:44.522728 [2] while waiting for reply, state = Leader
09:17:44.522830 [2] sending AppendEntries to 0: ni=3, args={Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.522903 [2] sending AppendEntries to 1: ni=3, args={Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.524355 [0] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.524411 [0] AppendEntries reply: {Term:5 Success:false}
09:17:44.524641 [2] AppendEntries reply from 0 !success: nextIndex := 2
09:17:44.526845 [2] in election timer state=Leader, bailing out
09:17:44.526936 [1] in election timer term changed from 4 to 5, bailing out
09:17:44.529268 [1] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.529331 [1] AppendEntries reply: {Term:5 Success:true}
09:17:44.529640 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:3], matchIndex := map[0:-1 1:2]
09:17:44.531798 [0] in election timer term changed from 4 to 5, bailing out
09:17:44.573808 [2] sending AppendEntries to 0: ni=2, args={Term:5 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
09:17:44.573833 [2] sending AppendEntries to 1: ni=3, args={Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.575451 [0] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:2}
09:17:44.575497 [0] ... inserting entries [{7 1}] from index 2
09:17:44.575539 [0] ... log is now: [{5 1} {6 1} {7 1}]
09:17:44.575559 [0] ... setting commitIndex=2
09:17:44.575614 [0] AppendEntries reply: {Term:5 Success:true}
09:17:44.575756 [0] commitChanSender entries=[{7 1}], savedLastApplied=1
09:17:44.575828 [TEST] collectCommits(0) got {Command:7 Index:2 Term:5}
09:17:44.575875 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:44.577991 [1] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.578028 [1] AppendEntries reply: {Term:5 Success:true}
09:17:44.578318 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:44.623131 [2] sending AppendEntries to 0: ni=3, args={Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.623146 [2] sending AppendEntries to 1: ni=3, args={Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.625661 [1] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.625707 [1] AppendEntries reply: {Term:5 Success:true}
09:17:44.626072 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:44.628121 [0] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.628186 [0] AppendEntries reply: {Term:5 Success:true}
09:17:44.628426 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:44.673579 [2] sending AppendEntries to 1: ni=3, args={Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.673582 [2] sending AppendEntries to 0: ni=3, args={Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.676423 [1] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.676474 [1] AppendEntries reply: {Term:5 Success:true}
09:17:44.676841 [2] AppendEntries reply from 1 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:44.679964 [0] AppendEntries: {Term:5 LeaderId:2 PrevLogIndex:2 PrevLogTerm:1 Entries:[] LeaderCommit:2}
09:17:44.680024 [0] AppendEntries reply: {Term:5 Success:true}
09:17:44.680391 [2] AppendEntries reply from 0 success: nextIndex := map[0:3 1:3], matchIndex := map[0:2 1:2]
09:17:44.680534 [0] becomes Dead
09:17:44.680593 [0] commitChanSender done
09:17:44.680650 [1] becomes Dead
09:17:44.680700 [1] commitChanSender done
09:17:44.680776 [2] becomes Dead
09:17:44.680845 [2] commitChanSender done
09:17:44.683318 [0] in election timer state=Dead, bailing out
09:17:44.683319 [1] in election timer state=Dead, bailing out
--- PASS: TestCommitWithDisconnectionAndRecover (1.62s)
=== RUN   TestNoCommitWithNoQuorum
09:17:44.738100 [0] listening at [::]:37763
09:17:44.738304 [1] listening at [::]:39249
09:17:44.738484 [2] listening at [::]:36255
09:17:44.740173 [1] election timer started (239ms), term=0
09:17:44.740178 [2] election timer started (181ms), term=0
09:17:44.740247 [0] election timer started (240ms), term=0
09:17:44.931166 [2] becomes Candidate (currentTerm=1); log=[]
09:17:44.931309 [2] sending RequestVote to 1: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:44.931417 [2] sending RequestVote to 0: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1}
09:17:44.931446 [2] election timer started (183ms), term=1
09:17:44.935733 [1] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:44.935776 [1] ... term out of date in RequestVote
09:17:44.935805 [1] becomes Follower with term=1; log=[]
09:17:44.935921 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:44.936045 [1] election timer started (192ms), term=1
09:17:44.936675 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:44.936724 [2] wins election with 2 votes
09:17:44.936733 [0] RequestVote: {Term:1 CandidateId:2 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:44.936801 [0] ... term out of date in RequestVote
09:17:44.936826 [2] becomes Leader; term=1, nextIndex=map[0:0 1:0], matchIndex=map[0:-1 1:-1]; log=[]
09:17:44.936843 [0] becomes Follower with term=1; log=[]
09:17:44.936977 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:44.936998 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:44.937016 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:44.937100 [0] election timer started (259ms), term=1
09:17:44.937943 [2] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:44.937984 [2] while waiting for reply, state = Leader
09:17:44.940588 [0] in election timer term changed from 0 to 1, bailing out
09:17:44.940617 [1] in election timer term changed from 0 to 1, bailing out
09:17:44.941792 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:44.941820 [2] in election timer state=Leader, bailing out
09:17:44.941856 [0] AppendEntries reply: {Term:1 Success:true}
09:17:44.942495 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:44.943357 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:44.943431 [1] AppendEntries reply: {Term:1 Success:true}
09:17:44.943948 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:44.987327 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:44.987333 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:44.989165 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:44.989229 [0] AppendEntries reply: {Term:1 Success:true}
09:17:44.989660 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:44.990619 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:44.990662 [1] AppendEntries reply: {Term:1 Success:true}
09:17:44.990979 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:45.037114 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:45.037123 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:45.039897 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:45.039939 [0] AppendEntries reply: {Term:1 Success:true}
09:17:45.040241 [2] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:45.041208 [2] Submit received by Leader: 5
09:17:45.041258 [2] ... log=[{5 1}]
09:17:45.041284 [2] Submit received by Leader: 6
09:17:45.041324 [2] ... log=[{5 1} {6 1}]
09:17:45.042378 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:45.042430 [1] AppendEntries reply: {Term:1 Success:true}
09:17:45.042690 [2] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0], matchIndex := map[0:-1 1:-1]
09:17:45.087984 [2] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:45.087986 [2] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:45.091263 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:45.091312 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:45.091332 [0] ... inserting entries [{5 1} {6 1}] from index 0
09:17:45.091379 [0] ... log is now: [{5 1} {6 1}]
09:17:45.091384 [1] ... inserting entries [{5 1} {6 1}] from index 0
09:17:45.091430 [0] AppendEntries reply: {Term:1 Success:true}
09:17:45.091461 [1] ... log is now: [{5 1} {6 1}]
09:17:45.091502 [1] AppendEntries reply: {Term:1 Success:true}
09:17:45.091763 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:0], matchIndex := map[0:1 1:-1]
09:17:45.091797 [2] leader sets commitIndex := 1
09:17:45.091895 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
09:17:45.091930 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:45.091968 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
09:17:45.092016 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
09:17:45.137840 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.137916 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.140576 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.140615 [0] ... setting commitIndex=1
09:17:45.140675 [0] AppendEntries reply: {Term:1 Success:true}
09:17:45.140888 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
09:17:45.140978 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:45.140979 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
09:17:45.141071 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
09:17:45.143030 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.143064 [1] ... setting commitIndex=1
09:17:45.143103 [1] AppendEntries reply: {Term:1 Success:true}
09:17:45.143305 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
09:17:45.143384 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:45.143408 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
09:17:45.143462 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
09:17:45.187470 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.187481 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.193158 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.193225 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.193230 [0] AppendEntries reply: {Term:1 Success:true}
09:17:45.193294 [1] AppendEntries reply: {Term:1 Success:true}
09:17:45.193641 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:45.193725 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:45.237784 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.237834 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.239584 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.239633 [0] AppendEntries reply: {Term:1 Success:true}
09:17:45.239937 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:45.242039 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.242078 [1] AppendEntries reply: {Term:1 Success:true}
09:17:45.242368 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:45.287244 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.287320 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.289988 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.290039 [0] AppendEntries reply: {Term:1 Success:true}
09:17:45.290388 [2] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:45.292414 [TEST] Disconnect 0
09:17:45.292791 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.292856 [1] AppendEntries reply: {Term:1 Success:true}
09:17:45.292897 [TEST] Disconnect 1
09:17:45.293258 [2] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2], matchIndex := map[0:1 1:1]
09:17:45.337141 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.337163 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.387190 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.387200 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.437771 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.437832 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.486285 [1] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
09:17:45.486462 [1] election timer started (208ms), term=2
09:17:45.486537 [1] sending RequestVote to 2: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
09:17:45.486565 [1] sending RequestVote to 0: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
09:17:45.487597 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.487641 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.537662 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.537665 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.544097 [2] Submit received by Leader: 8
09:17:45.544213 [2] ... log=[{5 1} {6 1} {8 1}]
09:17:45.557653 [0] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
09:17:45.557794 [0] sending RequestVote to 2: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
09:17:45.557837 [0] election timer started (281ms), term=2
09:17:45.557845 [0] sending RequestVote to 1: {Term:2 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
09:17:45.587978 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.588000 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.637307 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.637351 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.687377 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.687481 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.696787 [1] becomes Candidate (currentTerm=3); log=[{5 1} {6 1}]
09:17:45.696946 [1] sending RequestVote to 0: {Term:3 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
09:17:45.696965 [1] sending RequestVote to 2: {Term:3 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
09:17:45.697013 [1] election timer started (176ms), term=3
09:17:45.737517 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.737545 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.787652 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.787654 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.795135 [TEST] Reconnect 0
09:17:45.796350 [TEST] Reconnect 1
09:17:45.837754 [2] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.837762 [2] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.840399 [0] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.840471 [0] AppendEntries reply: {Term:2 Success:false}
09:17:45.841462 [2] term out of date in heartbeat reply
09:17:45.841529 [2] becomes Follower with term=2; log=[{5 1} {6 1} {8 1}]
09:17:45.841602 [2] election timer started (211ms), term=2
09:17:45.844222 [1] AppendEntries: {Term:1 LeaderId:2 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:1}] LeaderCommit:1}
09:17:45.844290 [1] AppendEntries reply: {Term:3 Success:false}
09:17:45.844966 [2] term out of date in heartbeat reply
09:17:45.845035 [2] becomes Follower with term=3; log=[{5 1} {6 1} {8 1}]
09:17:45.845112 [2] election timer started (176ms), term=3
09:17:45.849082 [0] becomes Candidate (currentTerm=3); log=[{5 1} {6 1}]
09:17:45.849181 [0] election timer started (262ms), term=3
09:17:45.849265 [0] sending RequestVote to 1: {Term:3 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
09:17:45.849266 [0] sending RequestVote to 2: {Term:3 CandidateId:0 LastLogIndex:1 LastLogTerm:1}
09:17:45.852078 [2] in election timer term changed from 2 to 3, bailing out
09:17:45.853455 [1] RequestVote: {Term:3 CandidateId:0 LastLogIndex:1 LastLogTerm:1} [currentTerm=3, votedFor=1, log index/term=(1, 1)]
09:17:45.853668 [1] ... RequestVote reply: &{Term:3 VoteGranted:false}
09:17:45.854312 [2] RequestVote: {Term:3 CandidateId:0 LastLogIndex:1 LastLogTerm:1} [currentTerm=3, votedFor=-1, log index/term=(2, 1)]
09:17:45.854415 [2] ... RequestVote reply: &{Term:3 VoteGranted:false}
09:17:45.854774 [0] received RequestVoteReply {Term:3 VoteGranted:false}
09:17:45.855267 [0] received RequestVoteReply {Term:3 VoteGranted:false}
09:17:45.877605 [1] becomes Candidate (currentTerm=4); log=[{5 1} {6 1}]
09:17:45.877728 [1] election timer started (214ms), term=4
09:17:45.877822 [1] sending RequestVote to 2: {Term:4 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
09:17:45.877846 [1] sending RequestVote to 0: {Term:4 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
09:17:45.881577 [2] RequestVote: {Term:4 CandidateId:1 LastLogIndex:1 LastLogTerm:1} [currentTerm=3, votedFor=-1, log index/term=(2, 1)]
09:17:45.881614 [2] ... term out of date in RequestVote
09:17:45.881757 [2] becomes Follower with term=4; log=[{5 1} {6 1} {8 1}]
09:17:45.881845 [2] ... RequestVote reply: &{Term:4 VoteGranted:false}
09:17:45.881908 [0] RequestVote: {Term:4 CandidateId:1 LastLogIndex:1 LastLogTerm:1} [currentTerm=3, votedFor=0, log index/term=(1, 1)]
09:17:45.881918 [2] election timer started (288ms), term=4
09:17:45.881973 [0] ... term out of date in RequestVote
09:17:45.882179 [0] becomes Follower with term=4; log=[{5 1} {6 1}]
09:17:45.882250 [0] ... RequestVote reply: &{Term:4 VoteGranted:true}
09:17:45.882384 [0] election timer started (204ms), term=4
09:17:45.882822 [1] received RequestVoteReply {Term:4 VoteGranted:false}
09:17:45.883383 [1] received RequestVoteReply {Term:4 VoteGranted:true}
09:17:45.883433 [1] wins election with 2 votes
09:17:45.883575 [1] becomes Leader; term=4, nextIndex=map[0:2 2:2], matchIndex=map[0:-1 2:-1]; log=[{5 1} {6 1}]
09:17:45.883980 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.884173 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.885295 [2] in election timer term changed from 3 to 4, bailing out
09:17:45.888672 [1] in election timer state=Leader, bailing out
09:17:45.889784 [0] in election timer term changed from 3 to 4, bailing out
09:17:45.889851 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.889904 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.889926 [2] AppendEntries reply: {Term:4 Success:true}
09:17:45.889956 [0] AppendEntries reply: {Term:4 Success:true}
09:17:45.890591 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:-1]
09:17:45.890790 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:45.934659 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.934660 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.939493 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.939543 [0] AppendEntries reply: {Term:4 Success:true}
09:17:45.939808 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:45.940825 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.940870 [2] AppendEntries reply: {Term:4 Success:true}
09:17:45.941122 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:45.984990 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.985067 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.986603 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.986654 [2] AppendEntries reply: {Term:4 Success:true}
09:17:45.987097 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:45.989138 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:45.989178 [0] AppendEntries reply: {Term:4 Success:true}
09:17:45.989488 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.034579 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.034580 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.037598 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.037643 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.038042 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.041062 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.041107 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.041422 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.084456 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.084468 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.090640 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.090689 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.090706 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.090771 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.091033 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.091133 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.134292 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.134308 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.137723 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.137784 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.138125 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.139053 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.139091 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.139397 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.184198 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.184243 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.188851 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.188905 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.189300 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.190258 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.190335 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.190738 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.235017 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.235019 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.239680 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.239730 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.240043 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.241036 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.241104 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.241457 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.284539 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.284539 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.287773 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.287846 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.288368 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.288459 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.288511 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.288855 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.334669 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.334715 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.337245 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.337287 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.337570 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.339631 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.339671 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.339939 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.384946 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.385019 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.387773 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.387835 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.388194 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.390453 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:46.390500 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.390729 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2], matchIndex := map[0:1 2:1]
09:17:46.398135 [1] Submit received by Leader: 9
09:17:46.398209 [1] ... log=[{5 1} {6 1} {9 4}]
09:17:46.398238 [1] Submit received by Leader: 10
09:17:46.398288 [1] ... log=[{5 1} {6 1} {9 4} {10 4}]
09:17:46.398314 [1] Submit received by Leader: 11
09:17:46.398380 [1] ... log=[{5 1} {6 1} {9 4} {10 4} {11 4}]
09:17:46.435448 [1] sending AppendEntries to 2: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
09:17:46.435482 [1] sending AppendEntries to 0: ni=2, args={Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
09:17:46.437506 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
09:17:46.437624 [2] ... inserting entries [{9 4} {10 4} {11 4}] from index 2
09:17:46.437723 [2] ... log is now: [{5 1} {6 1} {9 4} {10 4} {11 4}]
09:17:46.437779 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.438404 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:5], matchIndex := map[0:1 2:4]
09:17:46.438456 [1] leader sets commitIndex := 4
09:17:46.438565 [1] commitChanSender entries=[{9 4} {10 4} {11 4}], savedLastApplied=1
09:17:46.438648 [TEST] collectCommits(1) got {Command:9 Index:2 Term:4}
09:17:46.438703 [TEST] collectCommits(1) got {Command:10 Index:3 Term:4}
09:17:46.438755 [TEST] collectCommits(1) got {Command:11 Index:4 Term:4}
09:17:46.440381 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:9 Term:4} {Command:10 Term:4} {Command:11 Term:4}] LeaderCommit:1}
09:17:46.440500 [0] ... inserting entries [{9 4} {10 4} {11 4}] from index 2
09:17:46.440578 [0] ... log is now: [{5 1} {6 1} {9 4} {10 4} {11 4}]
09:17:46.440621 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.441114 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.485001 [1] sending AppendEntries to 0: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.485058 [1] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.488020 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.488099 [2] ... setting commitIndex=4
09:17:46.488176 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.488364 [2] commitChanSender entries=[{9 4} {10 4} {11 4}], savedLastApplied=1
09:17:46.488445 [TEST] collectCommits(2) got {Command:9 Index:2 Term:4}
09:17:46.488507 [TEST] collectCommits(2) got {Command:10 Index:3 Term:4}
09:17:46.488560 [TEST] collectCommits(2) got {Command:11 Index:4 Term:4}
09:17:46.488641 [1] AppendEntries reply from 2 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.491645 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.491697 [0] ... setting commitIndex=4
09:17:46.491758 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.491899 [0] commitChanSender entries=[{9 4} {10 4} {11 4}], savedLastApplied=1
09:17:46.492002 [TEST] collectCommits(0) got {Command:9 Index:2 Term:4}
09:17:46.492062 [TEST] collectCommits(0) got {Command:10 Index:3 Term:4}
09:17:46.492131 [TEST] collectCommits(0) got {Command:11 Index:4 Term:4}
09:17:46.492159 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.535482 [1] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.535488 [1] sending AppendEntries to 0: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.539244 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.539306 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.539624 [1] AppendEntries reply from 2 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.541720 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.541761 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.542074 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.583978 [1] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.584012 [1] sending AppendEntries to 0: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.588233 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.588245 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.588297 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.588332 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.588644 [1] AppendEntries reply from 2 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.588724 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.635120 [1] sending AppendEntries to 0: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.635122 [1] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.639147 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.639207 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.639589 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.641657 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.641710 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.642072 [1] AppendEntries reply from 2 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.684850 [1] sending AppendEntries to 0: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.684852 [1] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.688188 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.688253 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.688617 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.691675 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.691715 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.692011 [1] AppendEntries reply from 2 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.734718 [1] sending AppendEntries to 2: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.734718 [1] sending AppendEntries to 0: ni=5, args={Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.739172 [2] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.739222 [2] AppendEntries reply: {Term:4 Success:true}
09:17:46.739522 [1] AppendEntries reply from 2 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.740536 [0] AppendEntries: {Term:4 LeaderId:1 PrevLogIndex:4 PrevLogTerm:4 Entries:[] LeaderCommit:4}
09:17:46.740571 [0] AppendEntries reply: {Term:4 Success:true}
09:17:46.740797 [1] AppendEntries reply from 0 success: nextIndex := map[0:5 2:5], matchIndex := map[0:4 2:4]
09:17:46.749439 [0] becomes Dead
09:17:46.749529 [0] commitChanSender done
09:17:46.749546 [1] becomes Dead
09:17:46.749619 [1] commitChanSender done
09:17:46.749653 [2] becomes Dead
09:17:46.749717 [2] commitChanSender done
09:17:46.752320 [2] in election timer state=Dead, bailing out
09:17:46.752678 [0] in election timer state=Dead, bailing out
--- PASS: TestNoCommitWithNoQuorum (2.07s)
=== RUN   TestCommitsWithLeaderDisconnects
09:17:46.807215 [0] listening at [::]:40485
09:17:46.807428 [1] listening at [::]:46527
09:17:46.807613 [2] listening at [::]:43503
09:17:46.807766 [3] listening at [::]:39205
09:17:46.807908 [4] listening at [::]:34639
09:17:46.813453 [2] election timer started (299ms), term=0
09:17:46.813474 [4] election timer started (150ms), term=0
09:17:46.813512 [1] election timer started (185ms), term=0
09:17:46.813516 [3] election timer started (280ms), term=0
09:17:46.813531 [0] election timer started (169ms), term=0
09:17:46.964117 [4] becomes Candidate (currentTerm=1); log=[]
09:17:46.964291 [4] election timer started (263ms), term=1
09:17:46.964451 [4] sending RequestVote to 2: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
09:17:46.964457 [4] sending RequestVote to 1: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
09:17:46.964547 [4] sending RequestVote to 3: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
09:17:46.964551 [4] sending RequestVote to 0: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1}
09:17:46.967604 [2] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:46.967640 [2] ... term out of date in RequestVote
09:17:46.967671 [2] becomes Follower with term=1; log=[]
09:17:46.967806 [2] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:46.967832 [1] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:46.967875 [1] ... term out of date in RequestVote
09:17:46.967914 [1] becomes Follower with term=1; log=[]
09:17:46.967980 [2] election timer started (197ms), term=1
09:17:46.968044 [1] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:46.968173 [1] election timer started (164ms), term=1
09:17:46.968671 [4] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:46.968704 [0] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:46.968734 [0] ... term out of date in RequestVote
09:17:46.968771 [0] becomes Follower with term=1; log=[]
09:17:46.968871 [0] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:46.968894 [4] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:46.968933 [4] wins election with 3 votes
09:17:46.969024 [0] election timer started (294ms), term=1
09:17:46.969078 [4] becomes Leader; term=1, nextIndex=map[0:0 1:0 2:0 3:0], matchIndex=map[0:-1 1:-1 2:-1 3:-1]; log=[]
09:17:46.969224 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:46.969275 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:46.969287 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:46.969225 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:46.969688 [3] RequestVote: {Term:1 CandidateId:4 LastLogIndex:-1 LastLogTerm:-1} [currentTerm=0, votedFor=-1, log index/term=(-1, -1)]
09:17:46.969729 [3] ... term out of date in RequestVote
09:17:46.969751 [4] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:46.969766 [3] becomes Follower with term=1; log=[]
09:17:46.969804 [4] while waiting for reply, state = Leader
09:17:46.969898 [3] ... RequestVote reply: &{Term:1 VoteGranted:true}
09:17:46.970156 [3] election timer started (185ms), term=1
09:17:46.970549 [4] received RequestVoteReply {Term:1 VoteGranted:true}
09:17:46.970584 [4] while waiting for reply, state = Leader
09:17:46.971326 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:46.971384 [0] AppendEntries reply: {Term:1 Success:true}
09:17:46.971882 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:46.972770 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:46.972830 [2] AppendEntries reply: {Term:1 Success:true}
09:17:46.973229 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:46.974148 [3] in election timer term changed from 0 to 1, bailing out
09:17:46.974215 [2] in election timer term changed from 0 to 1, bailing out
09:17:46.974238 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:46.974276 [0] in election timer term changed from 0 to 1, bailing out
09:17:46.974236 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:46.974313 [1] AppendEntries reply: {Term:1 Success:true}
09:17:46.974358 [3] AppendEntries reply: {Term:1 Success:true}
09:17:46.974419 [1] in election timer term changed from 0 to 1, bailing out
09:17:46.974433 [4] in election timer state=Leader, bailing out
09:17:46.974770 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:46.974901 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:47.019974 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.020046 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.019974 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.019980 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.022683 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.022701 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.022728 [1] AppendEntries reply: {Term:1 Success:true}
09:17:47.022746 [3] AppendEntries reply: {Term:1 Success:true}
09:17:47.023089 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:47.023248 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:47.024069 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.024092 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.024131 [2] AppendEntries reply: {Term:1 Success:true}
09:17:47.024135 [0] AppendEntries reply: {Term:1 Success:true}
09:17:47.024493 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:47.024609 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:47.069605 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.069609 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.069697 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.069613 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.071302 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.071354 [2] AppendEntries reply: {Term:1 Success:true}
09:17:47.071648 [4] AppendEntries reply from 2 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:47.072634 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.072669 [3] AppendEntries reply: {Term:1 Success:true}
09:17:47.072947 [4] AppendEntries reply from 3 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:47.073927 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.073959 [0] AppendEntries reply: {Term:1 Success:true}
09:17:47.074255 [4] AppendEntries reply from 0 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:47.074334 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[] LeaderCommit:-1}
09:17:47.074380 [1] AppendEntries reply: {Term:1 Success:true}
09:17:47.074699 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:0 2:0 3:0], matchIndex := map[0:-1 1:-1 2:-1 3:-1]
09:17:47.115268 [4] Submit received by Leader: 5
09:17:47.115332 [4] ... log=[{5 1}]
09:17:47.115360 [4] Submit received by Leader: 6
09:17:47.115399 [4] ... log=[{5 1} {6 1}]
09:17:47.119939 [4] sending AppendEntries to 0: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:47.119946 [4] sending AppendEntries to 1: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:47.119955 [4] sending AppendEntries to 3: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:47.120206 [4] sending AppendEntries to 2: ni=0, args={Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:47.121980 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:47.121997 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:47.122047 [1] ... inserting entries [{5 1} {6 1}] from index 0
09:17:47.121995 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:47.122095 [3] ... inserting entries [{5 1} {6 1}] from index 0
09:17:47.122144 [1] ... log is now: [{5 1} {6 1}]
09:17:47.122163 [0] ... inserting entries [{5 1} {6 1}] from index 0
09:17:47.122208 [1] AppendEntries reply: {Term:1 Success:true}
09:17:47.122263 [0] ... log is now: [{5 1} {6 1}]
09:17:47.122322 [0] AppendEntries reply: {Term:1 Success:true}
09:17:47.122175 [3] ... log is now: [{5 1} {6 1}]
09:17:47.122428 [3] AppendEntries reply: {Term:1 Success:true}
09:17:47.122797 [4] AppendEntries reply from 1 success: nextIndex := map[0:0 1:2 2:0 3:0], matchIndex := map[0:-1 1:1 2:-1 3:-1]
09:17:47.122945 [4] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2 2:0 3:0], matchIndex := map[0:1 1:1 2:-1 3:-1]
09:17:47.122993 [4] leader sets commitIndex := 1
09:17:47.123107 [4] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
09:17:47.123190 [4] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 2:0 3:2], matchIndex := map[0:1 1:1 2:-1 3:1]
09:17:47.123205 [TEST] collectCommits(4) got {Command:5 Index:0 Term:1}
09:17:47.123295 [TEST] collectCommits(4) got {Command:6 Index:1 Term:1}
09:17:47.127151 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:-1 PrevLogTerm:-1 Entries:[{Command:5 Term:1} {Command:6 Term:1}] LeaderCommit:-1}
09:17:47.127265 [2] ... inserting entries [{5 1} {6 1}] from index 0
09:17:47.127356 [2] ... log is now: [{5 1} {6 1}]
09:17:47.127452 [2] AppendEntries reply: {Term:1 Success:true}
09:17:47.128358 [4] AppendEntries reply from 2 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]
09:17:47.170308 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.170309 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.170319 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.170324 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.173122 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.173170 [2] ... setting commitIndex=1
09:17:47.173225 [2] AppendEntries reply: {Term:1 Success:true}
09:17:47.173333 [2] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
09:17:47.173487 [TEST] collectCommits(2) got {Command:5 Index:0 Term:1}
09:17:47.173555 [4] AppendEntries reply from 2 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]
09:17:47.173559 [TEST] collectCommits(2) got {Command:6 Index:1 Term:1}
09:17:47.175624 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.175663 [1] ... setting commitIndex=1
09:17:47.175712 [1] AppendEntries reply: {Term:1 Success:true}
09:17:47.175812 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.175857 [0] ... setting commitIndex=1
09:17:47.175905 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.175927 [0] AppendEntries reply: {Term:1 Success:true}
09:17:47.175940 [1] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
09:17:47.175945 [3] ... setting commitIndex=1
09:17:47.176011 [3] AppendEntries reply: {Term:1 Success:true}
09:17:47.176043 [TEST] collectCommits(1) got {Command:5 Index:0 Term:1}
09:17:47.176043 [4] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]
09:17:47.176107 [TEST] collectCommits(1) got {Command:6 Index:1 Term:1}
09:17:47.176166 [3] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
09:17:47.176167 [0] commitChanSender entries=[{5 1} {6 1}], savedLastApplied=-1
09:17:47.176278 [TEST] collectCommits(3) got {Command:5 Index:0 Term:1}
09:17:47.176321 [TEST] collectCommits(3) got {Command:6 Index:1 Term:1}
09:17:47.176327 [4] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]
09:17:47.176393 [TEST] collectCommits(0) got {Command:5 Index:0 Term:1}
09:17:47.176443 [TEST] collectCommits(0) got {Command:6 Index:1 Term:1}
09:17:47.176481 [4] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]
09:17:47.219951 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.219971 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.220062 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.220071 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.222695 [0] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.222751 [0] AppendEntries reply: {Term:1 Success:true}
09:17:47.223041 [4] AppendEntries reply from 0 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]
09:17:47.224041 [3] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.224114 [3] AppendEntries reply: {Term:1 Success:true}
09:17:47.224383 [4] AppendEntries reply from 3 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]
09:17:47.225364 [1] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.225421 [1] AppendEntries reply: {Term:1 Success:true}
09:17:47.225656 [2] AppendEntries: {Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.225677 [4] AppendEntries reply from 1 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]
09:17:47.225706 [2] AppendEntries reply: {Term:1 Success:true}
09:17:47.225995 [4] AppendEntries reply from 2 success: nextIndex := map[0:2 1:2 2:2 3:2], matchIndex := map[0:1 1:1 2:1 3:1]
09:17:47.266412 [TEST] Disconnect 4
09:17:47.269626 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.269643 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.269629 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.269631 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.277986 [4] Submit received by Leader: 7
09:17:47.278071 [4] ... log=[{5 1} {6 1} {7 1}]
09:17:47.319868 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.319925 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.320012 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.319917 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.369585 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.369635 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.369585 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.369585 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.399097 [1] becomes Candidate (currentTerm=2); log=[{5 1} {6 1}]
09:17:47.399317 [1] sending RequestVote to 4: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
09:17:47.399335 [1] sending RequestVote to 3: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
09:17:47.399367 [1] election timer started (257ms), term=2
09:17:47.399335 [1] sending RequestVote to 0: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
09:17:47.399377 [1] sending RequestVote to 2: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1}
09:17:47.405247 [2] RequestVote: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1} [currentTerm=1, votedFor=4, log index/term=(1, 1)]
09:17:47.405348 [2] ... term out of date in RequestVote
09:17:47.405546 [2] becomes Follower with term=2; log=[{5 1} {6 1}]
09:17:47.405657 [2] ... RequestVote reply: &{Term:2 VoteGranted:true}
09:17:47.405753 [3] RequestVote: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1} [currentTerm=1, votedFor=4, log index/term=(1, 1)]
09:17:47.405788 [0] RequestVote: {Term:2 CandidateId:1 LastLogIndex:1 LastLogTerm:1} [currentTerm=1, votedFor=4, log index/term=(1, 1)]
09:17:47.405888 [0] ... term out of date in RequestVote
09:17:47.405981 [2] election timer started (225ms), term=2
09:17:47.405798 [3] ... term out of date in RequestVote
09:17:47.406046 [0] becomes Follower with term=2; log=[{5 1} {6 1}]
09:17:47.406177 [0] ... RequestVote reply: &{Term:2 VoteGranted:true}
09:17:47.406207 [3] becomes Follower with term=2; log=[{5 1} {6 1}]
09:17:47.406298 [3] ... RequestVote reply: &{Term:2 VoteGranted:true}
09:17:47.406340 [0] election timer started (294ms), term=2
09:17:47.406507 [3] election timer started (261ms), term=2
09:17:47.406915 [1] received RequestVoteReply {Term:2 VoteGranted:true}
09:17:47.407112 [1] received RequestVoteReply {Term:2 VoteGranted:true}
09:17:47.407155 [1] wins election with 3 votes
09:17:47.407300 [1] becomes Leader; term=2, nextIndex=map[0:2 2:2 3:2 4:2], matchIndex=map[0:-1 2:-1 3:-1 4:-1]; log=[{5 1} {6 1}]
09:17:47.407383 [1] received RequestVoteReply {Term:2 VoteGranted:true}
09:17:47.407428 [1] while waiting for reply, state = Leader
09:17:47.407638 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.407656 [1] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.407695 [1] sending AppendEntries to 2: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.407747 [1] sending AppendEntries to 3: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.408115 [2] in election timer term changed from 1 to 2, bailing out
09:17:47.409252 [0] in election timer term changed from 1 to 2, bailing out
09:17:47.410424 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.410448 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.410473 [1] in election timer state=Leader, bailing out
09:17:47.410493 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.410491 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.410623 [3] in election timer term changed from 1 to 2, bailing out
09:17:47.411017 [1] AppendEntries reply from 3 success: nextIndex := map[0:2 2:2 3:2 4:2], matchIndex := map[0:-1 2:-1 3:1 4:-1]
09:17:47.411114 [1] AppendEntries reply from 0 success: nextIndex := map[0:2 2:2 3:2 4:2], matchIndex := map[0:1 2:-1 3:1 4:-1]
09:17:47.413970 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[] LeaderCommit:1}
09:17:47.414016 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.414422 [1] AppendEntries reply from 2 success: nextIndex := map[0:2 2:2 3:2 4:2], matchIndex := map[0:1 2:1 3:1 4:-1]
09:17:47.419978 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.420021 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.420088 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.420090 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.428738 [1] Submit received by Leader: 8
09:17:47.428819 [1] ... log=[{5 1} {6 1} {8 2}]
09:17:47.458205 [1] sending AppendEntries to 0: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
09:17:47.458225 [1] sending AppendEntries to 3: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
09:17:47.458264 [1] sending AppendEntries to 2: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
09:17:47.458228 [1] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
09:17:47.461038 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
09:17:47.461052 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
09:17:47.461089 [0] ... inserting entries [{8 2}] from index 2
09:17:47.461112 [2] ... inserting entries [{8 2}] from index 2
09:17:47.461148 [0] ... log is now: [{5 1} {6 1} {8 2}]
09:17:47.461168 [2] ... log is now: [{5 1} {6 1} {8 2}]
09:17:47.461192 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.461211 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.461469 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:2 3:2 4:2], matchIndex := map[0:2 2:1 3:1 4:-1]
09:17:47.461559 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:2 4:2], matchIndex := map[0:2 2:2 3:1 4:-1]
09:17:47.461583 [1] leader sets commitIndex := 2
09:17:47.461635 [1] commitChanSender entries=[{8 2}], savedLastApplied=1
09:17:47.461684 [TEST] collectCommits(1) got {Command:8 Index:2 Term:2}
09:17:47.464665 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:1}
09:17:47.464737 [3] ... inserting entries [{8 2}] from index 2
09:17:47.464812 [3] ... log is now: [{5 1} {6 1} {8 2}]
09:17:47.464856 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.465187 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:2], matchIndex := map[0:2 2:2 3:2 4:-1]
09:17:47.470149 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.470167 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.470212 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.470216 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.507670 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.507737 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.507731 [1] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
09:17:47.507741 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.509400 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.509423 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.509437 [0] ... setting commitIndex=2
09:17:47.509459 [3] ... setting commitIndex=2
09:17:47.509484 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.509556 [0] commitChanSender entries=[{8 2}], savedLastApplied=1
09:17:47.509604 [TEST] collectCommits(0) got {Command:8 Index:2 Term:2}
09:17:47.509496 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.509714 [3] commitChanSender entries=[{8 2}], savedLastApplied=1
09:17:47.509780 [TEST] collectCommits(3) got {Command:8 Index:2 Term:2}
09:17:47.509848 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:2], matchIndex := map[0:2 2:2 3:2 4:-1]
09:17:47.509949 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:2], matchIndex := map[0:2 2:2 3:2 4:-1]
09:17:47.513055 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.513092 [2] ... setting commitIndex=2
09:17:47.513135 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.513263 [2] commitChanSender entries=[{8 2}], savedLastApplied=1
09:17:47.513339 [TEST] collectCommits(2) got {Command:8 Index:2 Term:2}
09:17:47.513446 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:2], matchIndex := map[0:2 2:2 3:2 4:-1]
09:17:47.520426 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.520462 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.520429 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.520429 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.557805 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.557889 [1] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
09:17:47.557899 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.557810 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.560570 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.560620 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.560940 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:2], matchIndex := map[0:2 2:2 3:2 4:-1]
09:17:47.563021 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.563065 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.563357 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:2], matchIndex := map[0:2 2:2 3:2 4:-1]
09:17:47.563395 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.563460 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.563786 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:2], matchIndex := map[0:2 2:2 3:2 4:-1]
09:17:47.570558 [4] sending AppendEntries to 3: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.570622 [4] sending AppendEntries to 2: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.570756 [4] sending AppendEntries to 1: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.570756 [4] sending AppendEntries to 0: ni=2, args={Term:1 LeaderId:4 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:7 Term:1}] LeaderCommit:1}
09:17:47.579837 [TEST] Reconnect 4
09:17:47.607650 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.607690 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.607731 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.607684 [1] sending AppendEntries to 4: ni=2, args={Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
09:17:47.610251 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.610310 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:1 PrevLogTerm:1 Entries:[{Command:8 Term:2}] LeaderCommit:2}
09:17:47.610340 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.610350 [4] ... term out of date in AppendEntries
09:17:47.610268 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.610426 [4] becomes Follower with term=2; log=[{5 1} {6 1} {7 1}]
09:17:47.610450 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.610530 [4] ... inserting entries [{8 2}] from index 2
09:17:47.610592 [4] ... log is now: [{5 1} {6 1} {8 2}]
09:17:47.610625 [4] ... setting commitIndex=2
09:17:47.610679 [4] AppendEntries reply: {Term:2 Success:true}
09:17:47.610782 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:2], matchIndex := map[0:2 2:2 3:2 4:-1]
09:17:47.610787 [4] commitChanSender entries=[{8 2}], savedLastApplied=1
09:17:47.610811 [4] election timer started (259ms), term=2
09:17:47.610893 [TEST] collectCommits(4) got {Command:8 Index:2 Term:2}
09:17:47.610926 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:2], matchIndex := map[0:2 2:2 3:2 4:-1]
09:17:47.611458 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.611487 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.611520 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.611783 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.658430 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.658443 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.658558 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.658745 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.660078 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.660121 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.660396 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.661407 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.661458 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.661734 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.662757 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.662793 [4] AppendEntries reply: {Term:2 Success:true}
09:17:47.663025 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.663075 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.663198 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.663421 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.708228 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.708229 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.708229 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.708234 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.712069 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.712117 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.712432 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.713400 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.713440 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.713724 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.714682 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.714732 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.714737 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.714812 [4] AppendEntries reply: {Term:2 Success:true}
09:17:47.715166 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.715287 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.758396 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.758445 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.758459 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.758396 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.759924 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.759993 [4] AppendEntries reply: {Term:2 Success:true}
09:17:47.760166 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.760225 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.760372 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.760486 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.763802 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.763844 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.764042 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.764097 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.764190 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.764416 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.807504 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.807582 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.807672 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.807676 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.809254 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.809308 [4] AppendEntries reply: {Term:2 Success:true}
09:17:47.809705 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.810657 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.810697 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.811013 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.811092 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.811130 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.811432 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.813474 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.813518 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.813931 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.857800 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.857878 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.857895 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.857879 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.860525 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.860568 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.860863 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.861841 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.861880 [4] AppendEntries reply: {Term:2 Success:true}
09:17:47.862158 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.863120 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.863179 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.863218 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.863268 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.863538 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.863644 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.908604 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.908653 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.908678 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.908682 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.912413 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.912454 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.912754 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.913747 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.913776 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.913828 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.913846 [4] AppendEntries reply: {Term:2 Success:true}
09:17:47.914131 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.914214 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.915100 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.915137 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.915590 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.958542 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.958574 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.958543 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.958543 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.960280 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.960345 [2] AppendEntries reply: {Term:2 Success:true}
09:17:47.960703 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.963904 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.963971 [0] AppendEntries reply: {Term:2 Success:true}
09:17:47.964165 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.964184 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:47.964214 [3] AppendEntries reply: {Term:2 Success:true}
09:17:47.964251 [4] AppendEntries reply: {Term:2 Success:true}
09:17:47.964331 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.964567 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:47.964705 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.008324 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.008363 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.008364 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.008325 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.012110 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.012158 [2] AppendEntries reply: {Term:2 Success:true}
09:17:48.012549 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.013485 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.013525 [3] AppendEntries reply: {Term:2 Success:true}
09:17:48.013864 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.013954 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.013991 [4] AppendEntries reply: {Term:2 Success:true}
09:17:48.014002 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.014077 [0] AppendEntries reply: {Term:2 Success:true}
09:17:48.014355 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.014457 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.057591 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.057683 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.057728 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.057683 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.060520 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.060545 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.060572 [0] AppendEntries reply: {Term:2 Success:true}
09:17:48.060588 [4] AppendEntries reply: {Term:2 Success:true}
09:17:48.060907 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.061055 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.062946 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.062989 [2] AppendEntries reply: {Term:2 Success:true}
09:17:48.063298 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.063338 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.063365 [3] AppendEntries reply: {Term:2 Success:true}
09:17:48.063719 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.108028 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.108099 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.108035 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.108040 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.109734 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.109780 [3] AppendEntries reply: {Term:2 Success:true}
09:17:48.110091 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.111047 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.111087 [0] AppendEntries reply: {Term:2 Success:true}
09:17:48.111371 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.113461 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.113506 [4] AppendEntries reply: {Term:2 Success:true}
09:17:48.113508 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.113562 [2] AppendEntries reply: {Term:2 Success:true}
09:17:48.113798 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.113899 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.158392 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.158425 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.158445 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.158426 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.161232 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.161304 [3] AppendEntries reply: {Term:2 Success:true}
09:17:48.161239 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.161405 [0] AppendEntries reply: {Term:2 Success:true}
09:17:48.161674 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.161767 [1] AppendEntries reply from 0 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.163787 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.163851 [2] AppendEntries reply: {Term:2 Success:true}
09:17:48.164061 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[] LeaderCommit:2}
09:17:48.164099 [4] AppendEntries reply: {Term:2 Success:true}
09:17:48.164209 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.164408 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:3 3:3 4:3], matchIndex := map[0:2 2:2 3:2 4:2]
09:17:48.182692 [1] Submit received by Leader: 9
09:17:48.182769 [1] ... log=[{5 1} {6 1} {8 2} {9 2}]
09:17:48.207688 [1] sending AppendEntries to 4: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
09:17:48.207723 [1] sending AppendEntries to 0: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
09:17:48.207696 [1] sending AppendEntries to 3: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
09:17:48.207801 [1] sending AppendEntries to 2: ni=3, args={Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
09:17:48.211631 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
09:17:48.211681 [3] ... inserting entries [{9 2}] from index 3
09:17:48.211742 [3] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
09:17:48.211784 [3] AppendEntries reply: {Term:2 Success:true}
09:17:48.212094 [1] AppendEntries reply from 3 success: nextIndex := map[0:3 2:3 3:4 4:3], matchIndex := map[0:2 2:2 3:3 4:2]
09:17:48.213184 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
09:17:48.213224 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
09:17:48.213249 [2] ... inserting entries [{9 2}] from index 3
09:17:48.213294 [4] ... inserting entries [{9 2}] from index 3
09:17:48.213369 [2] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
09:17:48.213384 [4] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
09:17:48.213419 [2] AppendEntries reply: {Term:2 Success:true}
09:17:48.213432 [4] AppendEntries reply: {Term:2 Success:true}
09:17:48.213656 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:2 PrevLogTerm:2 Entries:[{Command:9 Term:2}] LeaderCommit:2}
09:17:48.213710 [0] ... inserting entries [{9 2}] from index 3
09:17:48.213771 [0] ... log is now: [{5 1} {6 1} {8 2} {9 2}]
09:17:48.213771 [1] AppendEntries reply from 2 success: nextIndex := map[0:3 2:4 3:4 4:3], matchIndex := map[0:2 2:3 3:3 4:2]
09:17:48.213813 [0] AppendEntries reply: {Term:2 Success:true}
09:17:48.213817 [1] leader sets commitIndex := 3
09:17:48.213897 [1] commitChanSender entries=[{9 2}], savedLastApplied=2
09:17:48.213963 [TEST] collectCommits(1) got {Command:9 Index:3 Term:2}
09:17:48.213981 [1] AppendEntries reply from 4 success: nextIndex := map[0:3 2:4 3:4 4:4], matchIndex := map[0:2 2:3 3:3 4:3]
09:17:48.214117 [1] AppendEntries reply from 0 success: nextIndex := map[0:4 2:4 3:4 4:4], matchIndex := map[0:3 2:3 3:3 4:3]
09:17:48.258605 [1] sending AppendEntries to 4: ni=4, args={Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.258681 [1] sending AppendEntries to 3: ni=4, args={Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.258715 [1] sending AppendEntries to 0: ni=4, args={Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.258605 [1] sending AppendEntries to 2: ni=4, args={Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.261362 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.261400 [0] ... setting commitIndex=3
09:17:48.261443 [0] AppendEntries reply: {Term:2 Success:true}
09:17:48.261587 [0] commitChanSender entries=[{9 2}], savedLastApplied=2
09:17:48.261661 [TEST] collectCommits(0) got {Command:9 Index:3 Term:2}
09:17:48.261811 [1] AppendEntries reply from 0 success: nextIndex := map[0:4 2:4 3:4 4:4], matchIndex := map[0:3 2:3 3:3 4:3]
09:17:48.262740 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.262777 [2] ... setting commitIndex=3
09:17:48.262830 [2] AppendEntries reply: {Term:2 Success:true}
09:17:48.262927 [2] commitChanSender entries=[{9 2}], savedLastApplied=2
09:17:48.263007 [TEST] collectCommits(2) got {Command:9 Index:3 Term:2}
09:17:48.263197 [1] AppendEntries reply from 2 success: nextIndex := map[0:4 2:4 3:4 4:4], matchIndex := map[0:3 2:3 3:3 4:3]
09:17:48.263279 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.263305 [3] ... setting commitIndex=3
09:17:48.263345 [3] AppendEntries reply: {Term:2 Success:true}
09:17:48.263498 [3] commitChanSender entries=[{9 2}], savedLastApplied=2
09:17:48.263555 [TEST] collectCommits(3) got {Command:9 Index:3 Term:2}
09:17:48.263669 [1] AppendEntries reply from 3 success: nextIndex := map[0:4 2:4 3:4 4:4], matchIndex := map[0:3 2:3 3:3 4:3]
09:17:48.264613 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.264650 [4] ... setting commitIndex=3
09:17:48.264692 [4] AppendEntries reply: {Term:2 Success:true}
09:17:48.264849 [4] commitChanSender entries=[{9 2}], savedLastApplied=2
09:17:48.264922 [TEST] collectCommits(4) got {Command:9 Index:3 Term:2}
09:17:48.265023 [1] AppendEntries reply from 4 success: nextIndex := map[0:4 2:4 3:4 4:4], matchIndex := map[0:3 2:3 3:3 4:3]
09:17:48.307971 [1] sending AppendEntries to 4: ni=4, args={Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.308004 [1] sending AppendEntries to 0: ni=4, args={Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.307971 [1] sending AppendEntries to 3: ni=4, args={Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.308004 [1] sending AppendEntries to 2: ni=4, args={Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.309779 [0] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.309827 [0] AppendEntries reply: {Term:2 Success:true}
09:17:48.310179 [1] AppendEntries reply from 0 success: nextIndex := map[0:4 2:4 3:4 4:4], matchIndex := map[0:3 2:3 3:3 4:3]
09:17:48.312253 [4] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.312316 [4] AppendEntries reply: {Term:2 Success:true}
09:17:48.312667 [1] AppendEntries reply from 4 success: nextIndex := map[0:4 2:4 3:4 4:4], matchIndex := map[0:3 2:3 3:3 4:3]
09:17:48.314746 [3] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.314802 [3] AppendEntries reply: {Term:2 Success:true}
09:17:48.314747 [2] AppendEntries: {Term:2 LeaderId:1 PrevLogIndex:3 PrevLogTerm:2 Entries:[] LeaderCommit:3}
09:17:48.314962 [2] AppendEntries reply: {Term:2 Success:true}
09:17:48.315278 [1] AppendEntries reply from 3 success: nextIndex := map[0:4 2:4 3:4 4:4], matchIndex := map[0:3 2:3 3:3 4:3]
09:17:48.315399 [1] AppendEntries reply from 2 success: nextIndex := map[0:4 2:4 3:4 4:4], matchIndex := map[0:3 2:3 3:3 4:3]
09:17:48.334684 [0] becomes Dead
09:17:48.334762 [0] commitChanSender done
09:17:48.334817 [1] becomes Dead
09:17:48.334898 [1] commitChanSender done
09:17:48.334912 [2] becomes Dead
09:17:48.334980 [2] commitChanSender done
09:17:48.335034 [3] becomes Dead
09:17:48.335096 [3] commitChanSender done
09:17:48.335117 [4] becomes Dead
09:17:48.335176 [4] commitChanSender done
09:17:48.337030 [2] in election timer state=Dead, bailing out
09:17:48.337032 [0] in election timer state=Dead, bailing out
09:17:48.337046 [3] in election timer state=Dead, bailing out
09:17:48.341310 [4] in election timer state=Dead, bailing out
--- PASS: TestCommitsWithLeaderDisconnects (1.59s)
PASS
ok  	sandhu-sahil/raft-implementation/testing	15.022s
